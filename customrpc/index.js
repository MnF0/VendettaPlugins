(function(F,tt,e,A,f,m,o,h,g,ve,Ee,at,it){"use strict";const nt=f.findByStoreName("ThemeStore"),rt=f.findByProps("colors","meta"),{TextStyleSheet:st}=f.findByProps("TextStyleSheet"),{View:B,Text:re,Pressable:lt}=h.General,{FormRow:ct}=h.Forms,T=f.find(function(t){return t.render?.name==="ActionSheet"}),{openLazy:Ae,hideActionSheet:b}=f.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:_,ActionSheetCloseButton:x,ActionSheetContentContainer:k}=f.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");f.findByName("Navigator"),f.findByProps("getRenderCloseButton"),f.findByProps("popModal","pushModal");function ot(t){return rt.meta.resolveSemanticColor(nt.theme,t)}function ut(t,i){const a=t.discriminator==="0";return t.avatar?`https://cdn.discordapp.com/avatars/${t.id}/${i&&t.avatar.startsWith("a_")?`${t.avatar}.gif`:`${t.avatar}.png`}`:`https://cdn.discordapp.com/embed/avatars/${a?(parseInt(t.id)>>22)%6:parseInt(t.discriminator)%5}`}function S(t,i){T?Ae(new Promise(function(a){return a({default:t})}),"ActionSheet",i):g.showToast("You cannot open ActionSheets on this version! Update to 163+",o.getAssetIDByName("Small"))}function dt(t){let{title:i,onPress:a,icon:l}=t;const s=e.stylesheet.createThemedStyleSheet({androidRipple:{color:m.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:m.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:m.semanticColors.HEADER_SECONDARY}}),r=a?lt:B;return e.React.createElement(r,{android_ripple:s.androidRipple,disabled:!1,accessibilityRole:"button",onPress:a,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},l&&e.React.createElement(B,{style:{marginRight:4}},e.React.createElement(ct.Icon,{style:s.icon,source:l,size:"small"})),e.React.createElement(re,{style:s.mainText},i))}function X(t){let{title:i,onTitlePress:a,icon:l,children:s,padding:r}=t;const c=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:m.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(B,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(dt,{title:i,onPress:a,icon:l}),e.React.createElement(B,{style:c.main},r?e.React.createElement(B,{style:{paddingHorizontal:16,paddingVertical:16}},s):s))}function Se(t){let{addPadding:i}=t;const a=e.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:m.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return e.React.createElement(B,{style:[{marginTop:16,marginBottom:16},i&&{marginHorizontal:16}]},e.React.createElement(B,{style:a.line}))}var se;(function(t){function i(l){let{children:s,onPress:r}=l;return e.React.createElement(y,{variant:"text-md/bold",onPress:r},s)}t.Bold=i;function a(l){let{children:s,onPress:r}=l;return e.React.createElement(re,{style:{textDecorationLine:"underline"},onPress:r},s)}t.Underline=a})(se||(se={}));function y(t){let{variant:i,lineClamp:a,color:l,align:s,style:r,onPress:c,getChildren:u,children:d,liveUpdate:E}=t;const[O,D]=e.React.useReducer(function(be){return~be},0);return e.React.useEffect(function(){if(!E)return;const be=new Date().setMilliseconds(1e3);let Ze,et;return et=setTimeout(function(){D(),Ze=setInterval(D,1e3)},be-Date.now()),function(){clearTimeout(et),clearInterval(Ze)}},[]),e.React.createElement(re,{style:[i?st[i]:{},l?{color:ot(m.semanticColors[l])}:{},s?{textAlign:s}:{},r??{}],numberOfLines:a,onPress:c},u?.()??d)}function J(t){let{onPress:i,icon:a,style:l,destructive:s}=t;const r=e.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:m.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:m.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:m.semanticColors.TEXT_DANGER}});return e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:i},e.React.createElement(e.ReactNative.Image,{style:[typeof l=="string"?l==="header"?r.headerStyleIcon:r.cardStyleIcon:l,s&&r.destructiveIcon].filter(function(c){return!!c}),source:a}))}function j(t){return typeof t=="object"&&!Array.isArray(t)}function pt(t,i){if(t.storage.changelog??=i.length,t.storage.changelog!==i.length){const a=i[0],l=[];for(const s in a.changes){const r=a.changes[s];l.push(React.createElement(y,{color:r.startsWith("+ ")?"TEXT_POSITIVE":r.startsWith("- ")?"TEXT_DANGER":void 0,variant:"text-md/semibold"},r)),s!==(a.changes.length-1).toString()&&l.push(`
`)}A.showConfirmationAlert({title:`${t.manifest.name} Changelog`,content:[React.createElement(y,{variant:"text-lg/semibold",align:"center"},`v1.${i.length-1}${a.label?` (${a.label})`:""}`),`
`,...l],confirmText:"Ok",confirmColor:"grey",onConfirm:function(){return t.storage.changelog=i.length}})}}var Ie={github:{url:"https://github.com/Gabe616/VendettaPlugins/"}};const{showSimpleActionSheet:gt}=f.findByProps("showSimpleActionSheet"),ft=f.findByStoreName("UserStore");function yt(){const t=at.getDebugInfo(),i=e.ReactNative.NativeModules.InfoDictionaryManager??e.ReactNative.NativeModules.RTNClientInfoManager;return`Device: ${t.os.name==="iOS"?t.device.codename:`${t.device.brand} ${t.device.model}`}
Model: ${t.device.model}
Manufacturer: ${t.device.manufacturer}
Brand: ${t.device.brand}

OS: ${t.os.name}
Version: ${t.os.version}

Discord Branch: ${i.ReleaseChannel}
Discord Version: ${t.discord.version}
Discord Build: ${t.discord.build}
Vendetta Version: ${t.vendetta.version}

React Version: ${t.react.version}
Hermes Bytecode: ${t.hermes.bytecodeVersion}`}function Ce(t){const i=ft.getCurrentUser(),a=new URLSearchParams;for(const[l,s]of Object.entries(t))a.set(l,s);return a.set("discord-username",`@${i.username}${i.discriminator!=="0"?`#${i.discriminator}`:""}`),console.log(`${Ie.github.url}issues/new?${a.toString()}`),`${Ie.github.url}issues/new?${a.toString()}`}const mt=function(t){return gt({key:"CardOverflow",header:{title:"GitHub Reports"},options:[{label:"Copy bug report link",icon:o.getAssetIDByName("copy"),onPress:function(){e.clipboard.setString(Ce({title:`bug(${t}): `,template:"bug_report.yml",labels:"bug",sysinfo:yt()})),g.showToast("Copied",o.getAssetIDByName("toast_copy_link"))}},{label:"Copy feature suggestion link",icon:o.getAssetIDByName("copy"),onPress:function(){e.clipboard.setString(Ce({title:`suggest(${t}): `,labels:"suggestion",template:"suggestion.yml"})),g.showToast("Copied",o.getAssetIDByName("toast_copy_link"))}}]})},le="https://discord.com/api/v9/",{getToken:ce}=f.findByProps("getToken");async function ht(){return await(await ve.safeFetch(`${le}applications?with_team_applications=true`,{headers:{authorization:ce()}})).json()}async function Rt(t){return await(await ve.safeFetch(`${le}oauth2/applications/${t}/assets`,{cache:"no-store",headers:{authorization:ce()}})).json()}const N={};async function we(t){if(N[t])return N[t];N[t]="pending";let i=(await(await fetch(`${le}applications/0/external-assets`,{method:"POST",headers:{authorization:ce(),"content-type":"application/json"},body:JSON.stringify({urls:[t]})})).json())[0].external_asset_path;return i.startsWith("https://media.discordapp.net")&&(i=i.split("/").slice(3).join("/")),N[t]=i,i}const Te=f.findByProps("isTablet"),{View:Ne,Text:bt,Image:vt}=h.General,{TextStyleSheet:Et}=f.findByProps("TextStyleSheet"),oe=e.stylesheet.createThemedStyleSheet({card:{backgroundColor:m.semanticColors.BACKGROUND_SECONDARY,marginHorizontal:4,marginVertical:4,borderRadius:8,flex:1},cardHeader:{backgroundColor:m.semanticColors.BACKGROUND_TERTIARY,borderTopLeftRadius:8,borderTopRightRadius:8,paddingHorizontal:8,paddingVertical:8,width:"100%"},cardHeaderText:{...Et["text-sm/semibold"],color:m.semanticColors.TEXT_NORMAL},cardImage:{width:"100%",flex:1,borderBottomLeftRadius:8,borderBottomRightRadius:8}}),At=function(){const t=e.NavigationNative.useNavigation(),[i,a]=e.React.useState(""),[l,s]=e.React.useState();e.React.useEffect(function(){a("")}),l||Rt(fe).then(s);let r=!1;return l?e.React.createElement(e.ReactNative.FlatList,{ListEmptyComponent:e.React.createElement(h.Search,{style:{marginBottom:10},onChangeText:function(c){return a(c.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:l.filter(function(c){return c.name.toLowerCase().includes(i)}),numColumns:Te.isTablet?3:2,renderItem:function(c){const{item:u}=c;return e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){r||(r=!0,t.goBack(),ge?.(u.id))},style:{width:`${Te.isTablet?1/.03:1/.02}%`,aspectRatio:1}},e.React.createElement(Ne,{style:oe.card},e.React.createElement(Ne,{style:oe.cardHeader},e.React.createElement(bt,{style:oe.cardHeaderText},u.name)),e.React.createElement(vt,{source:{uri:`https://cdn.discordapp.com/app-assets/${fe}/${u.id}.png?size=128`}})))}}):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}})};function St(t){t.push("VendettaCustomPage",{render:At,title:"Select Asset"})}const{View:Pe,Image:It}=h.General;let De;const Ct=function(){const t=e.NavigationNative.useNavigation(),[i,a]=e.React.useState(""),[l,s]=e.React.useState();De=function(){return!r&&A.showInputAlert({title:"Custom App ID",placeholder:"123",confirmText:"Use",confirmColor:"blue",onConfirm:function(c){if(c.match(/^\s*$/))return g.showToast("App ID cannot be empty",o.getAssetIDByName("Small"));if(Number.isNaN(Number(c)))return g.showToast("Invalid app ID",o.getAssetIDByName("Small"));ee({id:c})},cancelText:"Cancel"})},e.React.useEffect(function(){a("")},[]),l||ht().then(s);let r=!1;return l?e.React.createElement(e.ReactNative.FlatList,{ListHeaderComponent:e.React.createElement(h.Search,{style:{marginBottom:10},onChangeText:function(c){return a(c.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:l.filter(function(c){return c.name.toLowerCase().includes(i.toLowerCase())}),renderItem:function(c){const{item:u}=c;return e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:function(){r||(r=!0,t.goBack(),ee?.({id:u.id,name:u.name}))}},e.React.createElement(Pe,{style:{marginHorizontal:8,marginBottom:8,flexDirection:"row"}},e.React.createElement(It,{source:{uri:u.icon?`https://cdn.discordapp.com/app-icons/${u.icon}/${u.icon}.png?size=64`:I.image},style:{borderRadius:8,resizeMode:"cover",aspectRatio:1}}),e.React.createElement(Pe,{style:{flexDirection:"column",marginLeft:8}},e.React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL"},u.name),e.React.createElement(y,{variant:"text-sm/medium",color:"TEXT_MUTED",lineClamp:1},u.description))))}}):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}})};function wt(t){t.push("VendettaCustomPage",{render:Ct,title:"Select Application",headerRight:function(){return e.React.createElement(J,{style:"header",icon:o.getAssetIDByName("ic_custom_color"),onPress:function(){return De?.()}})}})}function Be(t){const i=Math.abs(Math.floor(t/1e3)),a=Math.floor(i/3600),l=Math.floor(i/60)%60,s=i%60;return`${a?`${a.toString().padStart(2,"0")}:`:""}${l.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`}function ue(t){const i=Math.floor(t/60),a=t%60;return new Date().setHours(i,a,0,0)}function _e(t){const i=new Date(t);return i.getHours()*60+i.getMinutes()}function Y(t,i){if(t.startsWith("spotify:"))return`https://i.scdn.co/image/${t.slice(8)}`;if(t.startsWith("mp:"))return`https://media.discordapp.net/${t.slice(3)}`;if(!Number.isNaN(Number(t)))return`https://cdn.discordapp.com/app-assets/${i??"1"}/${t}.png?size=56`}const xe={online:"mp:attachments/919655852724604978/1125529509723123712/s_online.png",idle:"mp:attachments/919655852724604978/1125529509467279451/s_idle.png",dnd:"mp:attachments/919655852724604978/1125529509236572301/s_dnd.png",offline:"mp:attachments/919655852724604978/1125529508980731954/s_offline.png"},Tt=f.findByStoreName("UserStore"),{View:C,Image:ke,Pressable:$e}=h.General,Nt=f.findByName("UserActivityContainer"),H=e.stylesheet.createThemedStyleSheet({actTypeCont:{flexDirection:"row",marginBottom:12,justifyContent:"space-between"},card:{borderWidth:1,borderRadius:8,borderColor:m.semanticColors.BACKGROUND_MODIFIER_ACCENT},card2:{alignItems:"flex-start",flexDirection:"row"},images:{position:"relative",marginRight:10},smallImageBg:{borderColor:m.semanticColors.BACKGROUND_PRIMARY,backgroundColor:m.semanticColors.BACKGROUND_PRIMARY,borderWidth:1,borderRadius:18,position:"absolute",right:-4,bottom:-4}});let Le;function Pt(t){let{edit:i,act:a}=t;const[l,s]=e.React.useReducer(function(u){return~u},0);Le=s;const r=e.NavigationNative.useNavigation(),c=function(){s(),ie?.()};return i?e.React.createElement(e.React.Fragment,null,e.React.createElement(C,{style:H.actTypeCont},e.React.createElement(y,{variant:"eyebrow",color:"TEXT_NORMAL",onPress:function(){return S(Jt,{type:a.type??$.Playing,update:function(u){a.type=u,c()}})}},Ye[a.type??$.Playing]," ...")),e.React.createElement(C,{style:H.card},e.React.createElement(C,{style:{padding:16}},e.React.createElement(C,{style:H.card2},e.React.createElement(C,{style:H.images},e.React.createElement($e,{onPress:function(){return S(Me,{appId:a.app.id,role:"Large",image:a.assets.largeImg,navigation:r,update:function(u){a.assets.largeImg=u,c()}})}},e.React.createElement(ke,{source:{uri:Y(a.assets.largeImg??".",a.app.id)??I.image},style:{borderRadius:3,width:56,height:56}})),e.React.createElement(C,{style:H.smallImageBg},e.React.createElement($e,{onPress:function(){return S(Me,{appId:a.app.id,role:"Small",image:a.assets.smallImg,navigation:r,update:function(u){a.assets.smallImg=u,c()}})}},e.React.createElement(ke,{source:{uri:Y(a.assets.smallImg??".",a.app.id)??I.image},style:{borderRadius:14,width:28,height:28}})))),e.React.createElement(C,{style:{flex:1}},e.React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL",onPress:function(){return S(Ft,{appId:a.app.id,appName:a.app.name,navigation:r,update:function(u){u?.id!==a.app.id&&(Number.isNaN(Number(a.assets.smallImg))||delete a.assets.smallImg,Number.isNaN(Number(a.assets.largeImg))||delete a.assets.largeImg),a.app.id=u?.id,a.app.name=u?.name,c()}})}},a.app.name??I.appName),e.React.createElement(y,{variant:"text-sm/normal",color:"TEXT_NORMAL",onPress:function(){return z({role:"Details",current:a.details,update:function(u){a.details=u,c()}})}},a.details??I.details),e.React.createElement(y,{variant:"text-sm/normal",color:"TEXT_NORMAL",onPress:function(){return z({role:"State",current:a.state,update:function(u){a.state=u,c()}})}},a.state??I.state),e.React.createElement(y,{variant:"text-sm/normal",color:"TEXT_NORMAL",onPress:function(){return S(Ht,{start:a.timestamps.start,end:a.timestamps.end,update:function(u){a.timestamps.start=u.start,a.timestamps.end=u.end,c()}})},liveUpdate:!0,getChildren:function(){return typeof a.timestamps.end=="string"?`{${a.timestamps.end}}`:typeof a.timestamps.end=="number"?`${Be(ue(a.timestamps.end)-Date.now())} left`:typeof a.timestamps.start=="string"?`{${a.timestamps.start}}`:typeof a.timestamps.start=="number"?`${Be(Date.now()-ue(a.timestamps.start))} elapsed`:I.timestamp}}))),e.React.createElement(C,{style:{marginTop:16}},e.React.createElement(h.Button,{text:a.buttons[0]?.text??I.button1,style:{backgroundColor:"grey"},size:"small",onPress:function(){return S(Fe,{role:"1",text:a.buttons[0]?.text,url:a.buttons[0]?.url,update:function(u){let{text:d,url:E}=u;!d&&!E?a.buttons[0]=void 0:a.buttons[0]={text:d,url:E},c()}})}})),e.React.createElement(C,{style:{marginTop:10}},e.React.createElement(h.Button,{text:a.buttons[1]?.text??I.button2,style:{backgroundColor:"grey"},size:"small",onPress:function(){return S(Fe,{role:"2",text:a.buttons[1]?.text,url:a.buttons[1]?.url,update:function(u){let{text:d,url:E}=u;!d&&!E?a.buttons[1]=void 0:a.buttons[1]={text:d,url:E},c()}})}}))))):e.React.createElement(Nt,{user:Tt.getCurrentUser(),activity:We(a).activity})}let K={};function Dt(t,i,a,l){if(K[t])return;const s={default:l,timeout:-1};K[t]=s;const r=function(){const c=i(new Date);s.timeout=setTimeout(function(){a(),r()},c-Date.now())};r()}const W={};function Oe(t,i,a,l){W[t]||(e.FluxDispatcher.subscribe(i,a),W[t]={default:l,event:i,handler:a})}function Ue(t){for(const[i,a]of Object.entries(K))(t||!a.default)&&(clearTimeout(a.timeout),delete K[i]);for(const[i,a]of Object.entries(W))(t||!a.default)&&(e.FluxDispatcher.unsubscribe(a.event,a.handler),delete W[i])}function Bt(){Dt("auto_fix_timestamps",function(t){return t.setHours(24,0,0,0)},q,!0)}function q(){Le?.(),G()}const U=f.findByStoreName("UserStore"),w=f.findByStoreName("SpotifyStore"),de=f.findByStoreName("PresenceStore");var v;(function(t){t[t.CurrentUser=0]="CurrentUser",t[t.CurrentUserPresence=1]="CurrentUserPresence"})(v||(v={}));const P={presence:{status:void 0,custom:void 0,spotify:null}},pe=function(t){return(t??de.getActivities(U.getCurrentUser().id)).find(function(i){return i.type===4})},Ve=[{match:"{user.name}",description:"your username",types:[v.CurrentUser],replace:function(){return U.getCurrentUser().username}},{match:"{user.displayname}",description:"your display name",types:[v.CurrentUser],replace:function(){return U.getCurrentUser().globalName}},{match:"{user.status}",description:"your status",types:[v.CurrentUserPresence],replace:function(){return pe()?.label??"No Status"}},{match:"{user.presence}",description:"your presence (online/dnd/idle/invisible)",types:[v.CurrentUserPresence],replace:function(){return de.getStatus(U.getCurrentUser().id)}},{match:"{spotify.track}",description:"your playing Spotify track (Thot K)",types:[v.CurrentUserPresence],replace:function(){return w.getActivity()?.details??"No Spotify Track"}},{match:"{spotify.track.url}",description:"your playing Spotify track's share link",types:[v.CurrentUserPresence],replace:function(){const t=w.getActivity()?.sync_id;return t?`https://open.spotify.com/track/${t}`:""}},{match:"{spotify.artist}",description:"your playing Spotify track's artist(s) (iluvern!)",types:[v.CurrentUserPresence],replace:function(){return(P.presence.spotify=w.getActivity())?.state??"No Spotify Track"}},{match:"{spotify.album}",description:"your playing Spotify track's album (iluvern!)",types:[v.CurrentUserPresence],replace:function(){return(P.presence.spotify=w.getActivity())?.assets?.large_text??"No Spotify Track"}}];function _t(t){const i={content:t,types:[]};for(const a of Ve){let l;i.content=i.content.replaceAll(a.match,function(){for(const s of a.types)i.types.includes(s)||i.types.push(s);return l??(l=a.replace())})}return i}const Q=[{title:"Spotify Track Start",description:"The timestamp when your playing Spotify track started",format:"spotify.track.start",type:v.CurrentUserPresence,replace:function(){return(P.presence.spotify=w.getActivity())?.timestamps?.start}},{title:"Spotify Track End",description:"The timestamp when your playing Spotify track ends",format:"spotify.track.end",type:v.CurrentUserPresence,replace:function(){return(P.presence.spotify=w.getActivity())?.timestamps?.end}}];function xt(t){if(typeof t=="string"){const i=Q.find(function(l){return l.format===t}),a=i?.replace();return i?{timestamp:a!==void 0?_e(a):void 0,type:i.type}:{timestamp:0}}else return{timestamp:t}}const Z=[{title:"User Avatar",description:"Your avatar",format:"user.avatar",type:v.CurrentUser,replace:function(){const t=U.getCurrentUser(),i=ut({discriminator:t.discriminator,id:t.id,avatar:t.avatar});return N[i]||we(i).then(q),`mp:${N[i]}`}},{title:"User Presence",description:"Your presence (online/idle/dnd/invisible)",format:"user.presence",type:v.CurrentUserPresence,replace:function(){return xe[de.getStatus(U.getCurrentUser().id)]??xe.online}},{title:"Spotify Album Cover",description:"Your playing Spotify track's album cover",format:"spotify.album",type:v.CurrentUserPresence,replace:function(){return w.getActivity()?.assets?.large_image}}];function kt(t){const i=Z.find(function(a){return a.format===t});return i?{image:i.replace(),type:i.type}:{image:t}}function $t(t){for(const i of t)i===v.CurrentUser?Oe("parsed.currentuser","CURRENT_USER_UPDATE",q):i===v.CurrentUserPresence&&Oe("parsed.currentuserpresence","SELF_PRESENCE_STORE_UPDATE",function(a){(P.presence.status!==a.status||JSON.stringify(P.presence.custom)!==JSON.stringify(pe(a.activities))||JSON.stringify(P.presence.spotify)!==JSON.stringify(w.getActivity()))&&q(),P.presence={status:a.status,custom:pe(a.activities),spotify:w.getActivity()}})}const{View:Lt}=h.General,{FormRow:p,FormRadioRow:Ot}=h.Forms,Ut=f.findByProps("DatePickerModes"),Vt=function(){return e.React.createElement(Lt,{style:{marginBottom:16}})},V=e.stylesheet.createThemedStyleSheet({destructiveIcon:{tintColor:m.semanticColors.TEXT_DANGER}}),M={color:"TEXT_DANGER",variant:"text-md/semibold"};function Mt(t){let{role:i,update:a}=t;return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:`${i} Image Variable`,trailing:e.React.createElement(x,{onPress:function(){return b()}})}),Z.map(function(l){return e.React.createElement(p,{label:l.title,subLabel:l.description,trailing:e.React.createElement(p.Arrow,null),onPress:function(){a(l.format),b()}})})))}let ge,fe;function Me(t){let{appId:i,role:a,image:l,navigation:s,update:r}=t;return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:`Edit ${a} Image`,trailing:e.React.createElement(x,{onPress:b})}),e.React.createElement(p,{label:"Set Image Variable",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_essentials_sparkle")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){return S(Mt,{role:a,update:function(c){return r(c)}})}}),e.React.createElement(p,{label:"Use Custom Image",subLabel:"Make sure your image is in a square aspect ratio",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_link")}),onPress:function(){A.showInputAlert({title:"Enter the link to your image link",placeholder:"can be a discord attachment CDN link",confirmText:"Proxy",confirmColor:"brand",onConfirm:async function(c){const u=c.match(Ee.constants.HTTP_REGEX_MULTI)?.[0];if(!u)return g.showToast("Invalid URL",o.getAssetIDByName("Small"));g.showToast("Proxying image...",o.getAssetIDByName("ic_clock"));try{r(`mp:${await we(u)}`),g.showToast("Proxied image",o.getAssetIDByName("Check"))}catch(d){console.log(d),g.showToast("Failed to proxy image",o.getAssetIDByName("Small"))}},cancelText:"Cancel"})}}),e.React.createElement(p,{label:"Select RPC Asset",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_media_channel")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){if(!i)return A.showConfirmationAlert({title:"No App Set",content:"An app must be selected in order to use RPC assets",confirmText:"Dismiss",confirmColor:"grey",onConfirm:function(){}});fe=i,ge=function(c){ge=void 0,r(c)},St(s),b()}}),l&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove Image"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){r(void 0),b()}})))}function Fe(t){let{role:i,text:a,url:l,update:s}=t;return e.React.createElement(T,null,e.React.createElement(_,{title:`Edit Button ${i}`,trailing:e.React.createElement(x,{onPress:b})}),e.React.createElement(k,null,e.React.createElement(p,{label:"Button Text",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return z({role:`Button ${i} Text`,current:a,update:function(r){return s({text:r,url:l})}})}}),e.React.createElement(p,{label:"Button URL",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return z({role:`Button ${i} URL`,current:l,update:function(r){return s({text:a,url:r})}})}}),l&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove Button URL"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){s({text:a,url:void 0}),b()}}),a&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove Button"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){s(void 0),b()}})))}let ee;function Ft(t){let{appId:i,appName:a,navigation:l,update:s}=t;return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:"Edit Application",trailing:e.React.createElement(x,{onPress:b})}),e.React.createElement(p,{label:"Application Name",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return z({role:"Application Name",current:a,update:function(r){return s({id:i,name:r})}})}}),e.React.createElement(p,{label:"Select Application",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_robot_24px")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){ee=function(r){ee=void 0,s({id:r.id??i,name:r.name??a})},wt(l),b()}}),i&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove Application"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){s(void 0),b()}})))}function Jt(t){let{type:i,update:a}=t;const[l,s]=e.React.useState(i);return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:"Edit Activity Type",trailing:e.React.createElement(x,{onPress:function(){return b()}})}),...Object.values($).filter(function(r){return typeof r=="number"}).map(function(r){return e.React.createElement(Ot,{label:Ye[r],trailing:e.React.createElement(p.Arrow,null),selected:r===l,onPress:function(){a(r),s(r)}})})))}function Je(t){let{role:i,update:a}=t;return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:`Set ${i} Time Variable`,trailing:e.React.createElement(x,{onPress:function(){return b()}})}),Q.map(function(l){return e.React.createElement(p,{label:l.title,subLabel:l.description,trailing:e.React.createElement(p.Arrow,null),onPress:function(){a(l.format),b()}})})),e.React.createElement(Vt,null))}function Ht(t){let{start:i,end:a,update:l}=t;const s=function(r){let{role:c,onSubmit:u}=r;const d=new Date().setHours(0,0,0,0),E=new Date().setHours(23,59,59,999);Ae(Promise.resolve(Ut),"DatePicker",{onSubmit:function(O){return u(_e(O._d.getTime()))},title:`Timestamp ${c} Time`,startDate:new Date,minimumDate:new Date(d),maximumDate:new Date(E),requireDateChanged:!1,mode:"time"})};return e.React.createElement(T,null,e.React.createElement(k,null,e.React.createElement(_,{title:"Edit Timestamp",trailing:e.React.createElement(x,{onPress:function(){return b()}})}),e.React.createElement(p,{label:"Set Start Time Variable",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_essentials_sparkle")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){return S(Je,{role:"Start",update:function(r){return l({start:r,end:a})}})}}),typeof i!="string"&&e.React.createElement(p,{label:"Edit Start Time",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_message_edit")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){return s({role:"Start",onSubmit:function(r){return l({start:r,end:a})}})}}),i!==void 0&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove Start Time"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){l({start:void 0,end:a}),b()}}),e.React.createElement(p,{label:"Set End Time Variable",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_essentials_sparkle")}),trailing:e.React.createElement(p.Arrow,null),onPress:function(){return S(Je,{role:"End",update:function(r){return l({start:i,end:r})}})}}),typeof a!="string"&&e.React.createElement(p,{label:"Edit End Time",leading:e.React.createElement(p.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return s({role:"End",onSubmit:function(r){return l({start:i,end:r})}})}}),a!==void 0&&e.React.createElement(p,{label:e.React.createElement(y,M,"Remove End Time"),leading:e.React.createElement(p.Icon,{style:V.destructiveIcon,source:o.getAssetIDByName("trash")}),onPress:function(){l({start:i,end:void 0}),b()}})))}const te=function(t){let{role:i,button:a,secondaryButton:l,run:s,secondaryRun:r}=t;if(Qe())return s();A.showConfirmationAlert({title:"Unsaved Changes",content:["You have unsaved changes in ",e.React.createElement(se.Bold,null,n.activity.profile),`. Are you sure you want to ${i}?`],confirmText:a,confirmColor:"red",onConfirm:s,secondaryConfirmText:l,onConfirmSecondary:function(){r?.(),s?.()},cancelText:"Cancel"})},z=function(t){let{role:i,current:a,update:l}=t;return A.showInputAlert({title:`Enter New ${i}`,initialValue:a,placeholder:`really cool ${i.toLowerCase()}`,confirmText:"Change",confirmColor:"brand",onConfirm:l,cancelText:"Cancel"})};//! for some reason the compiler breaks here and doesn't recognize ActivityType
const zt={"Vendetta Advertisement":{state:"Join Now",details:'"The best Discord client for mobile"',app:{name:"Vendetta"},timestamps:{},assets:{largeImg:"mp:external/t88vNcbCl2anXnBX4gmLVep17K_yqL4L2pvzwPMGtjs/%3Fsize%3D512/https/cdn.discordapp.com/icons/1015931589865246730/5b7f29e9c670fbcbf476b4d88fbd081f.png"},type:3,buttons:[{text:"Join Vendetta",url:"https://discord.gg/vendetta-mod"},{text:"Install Vendetta",url:"https://github.com/vendetta-mod/Vendetta#installing"}]},"Scuffed Spotify Activity":{timestamps:{start:"spotify.track.start",end:"spotify.track.end"},assets:{smallImg:"user.avatar",largeImg:"spotify.album"},buttons:[{text:"Listen Along",url:"{spotify.track.url}"}],app:{name:"{spotify.track}"},type:2,details:"by {spotify.artist}",state:"on {spotify.album}"},"My Profile":{timestamps:{start:0},assets:{largeImg:"user.avatar",smallImg:"user.presence"},buttons:[],app:{name:"{user.displayname}"},type:3,details:"{user.name}",state:"{user.status}"}},{View:Gt}=h.General,{FormRadioRow:Xt,FormRow:jt}=h.Forms,{showSimpleActionSheet:Yt}=f.findByProps("showSimpleActionSheet"),Kt=f.findByProps("openLazy","hideActionSheet");let ae={import:void 0,add:void 0};const Wt=function(){const t=e.NavigationNative.useNavigation(),[i,a]=e.React.useReducer(function(c){return~c},0),[l,s]=e.React.useState("");e.React.useEffect(function(){s("")},[]),ae.add=function(){return A.showInputAlert({title:"Enter new profile name",placeholder:"Super Awesome RPC",confirmText:"Add",confirmColor:"brand",onConfirm:function(c){if(c.match(/^\s*$/))return g.showToast("Profile name cannot be empty",o.getAssetIDByName("Small"));if(c=c.trim(),n.profiles[c])return g.showToast("A profile with that name already exists",o.getAssetIDByName("Small"));n.profiles[c]=JSON.parse(JSON.stringify(n.activity.editing)),n.activity.profile=c,a(),g.showToast("Created profile",o.getAssetIDByName("Check"))},cancelText:"Cancel"})},ae.import=async function(){let c;try{c=JSON.parse(await e.clipboard.getString())}catch{return g.showToast("Failed to parse JSON")}if(!Ke(c))return g.showToast("Invalid profile data",o.getAssetIDByName("Small"));let u=0,d="Imported Profile";for(;n.profiles[d];)u++,d=`Imported Profile (${u})`;n.profiles[d]=c,n.activity.profile=d,a(),g.showToast("Imported profile",o.getAssetIDByName("Check"))};let r=!1;return e.React.createElement(e.ReactNative.FlatList,{ListHeaderComponent:e.React.createElement(h.Search,{style:{marginBottom:10},onChangeText:function(c){return s(c.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.keys(n.profiles).filter(function(c){return c.toLowerCase().includes(l)}),renderItem:function(c){let{item:u}=c;return e.React.createElement(Xt,{label:u,onLongPress:function(){return Yt({key:"CardOverflow",header:{title:u,onClose:function(){return Kt.hideActionSheet()}},options:[{label:"Copy Profile",icon:o.getAssetIDByName("copy"),onPress:function(){e.clipboard.setString(JSON.stringify(n.profiles[u],void 0,3)),g.showToast("Copied",o.getAssetIDByName("toast_copy_link"))}},{label:"Rename Profile",icon:o.getAssetIDByName("ic_message_edit"),onPress:function(){return A.showInputAlert({title:"Enter new profile name",placeholder:"Super Awesome RPC 2.0",initialValue:u,confirmText:"Rename",confirmColor:"brand",onConfirm:function(d){if(d.match(/^\s*$/))return g.showToast("Profile name cannot be empty",o.getAssetIDByName("Small"));if(d=d.trim(),n.profiles[d])return g.showToast("A profile with that name already exists",o.getAssetIDByName("Small"));n.profiles[d]=n.profiles[u],n.activity.profile===u&&(n.activity.profile=d),delete n.profiles[u],a(),g.showToast("Renamed profile",o.getAssetIDByName("Check"))},cancelText:"Cancel"})}},{label:"Delete Profile",icon:o.getAssetIDByName("trash"),isDestructive:!0,onPress:function(){return A.showConfirmationAlert({title:"Delete Profile",content:"Are you sure you want to delete this profile? This cannot be undone.",confirmText:"Delete",confirmColor:"red",onConfirm:function(){n.activity.profile===u&&(delete n.activity.profile,n.activity.editing=ne()),delete n.profiles[u],a(),ie?.(),g.showToast("Deleted",o.getAssetIDByName("Check"))},cancelText:"Cancel"})}}]})},onPress:function(){if(!r){if(n.activity.profile===u)return g.showToast(`${u} is already loaded`,o.getAssetIDByName("Small"));te({role:"discard your changes",button:"Discard",run:function(){n.activity.editing=JSON.parse(JSON.stringify(n.profiles[u])),n.activity.profile=u,r=!0,t.goBack(),ie?.(),g.showToast("Loaded",o.getAssetIDByName("Check"))},secondaryButton:"Save profile",secondaryRun:function(){n.profiles[n.activity.profile]=JSON.parse(JSON.stringify(n.activity.editing))}})}},trailing:e.React.createElement(jt.Arrow,null),selected:n.activity.profile===u})}})};function qt(t){t.push("VendettaCustomPage",{render:Wt,title:"Profiles",headerRight:function(){return e.React.createElement(Gt,{style:{flexDirection:"row-reverse"}},e.React.createElement(J,{style:"header",icon:o.getAssetIDByName("ic_add_24px"),onPress:function(){return ae.add?.()}}),e.React.createElement(J,{style:"header",icon:o.getAssetIDByName("ic_file_upload_24px"),onPress:function(){return ae.import?.()}}))}})}const{View:Qt,Text:Zt}=h.General,{FormSection:He}=h.Forms;let ze;const ea=function(){const[t,i]=e.React.useReducer(function(l){return~l},0);ze=i;const a=e.stylesheet.createThemedStyleSheet({code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:m.semanticColors.TEXT_NORMAL}});return e.React.createElement(Qt,null,e.React.createElement(He,{title:"Live Raw Activity"},L.lastRawActivity?e.React.createElement(Zt,{style:a.code},JSON.stringify(L.lastRawActivity,void 0,3)):n.settings.display?e.React.createElement(y,{variant:"text-md/semibold"},"Display activity setting is disabled. You need to actually enable it for the raw activity to show up lmao"):e.React.createElement(y,{variant:"text-md/semibold",onPress:function(){return G()}},"No last raw activity yet. Tap text to force update")),e.React.createElement(He,{title:"Info"},e.React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL"},"Last raw activity update:"," ",L.lastRawActivityTimestamp?new Date(L.lastRawActivityTimestamp).toLocaleString("en-US"):"-")))};function ta(t){t.push("VendettaCustomPage",{render:ea,title:"Live RawActivity"})}const{Animated:ye}=e.ReactNative;function aa(t){let{duration:i,children:a,style:l,fade:s,trigger:r,customOpacity:c,setDisplay:u,animateOnInit:d}=t;d??=!0;const E=e.React.useRef(!0),O=e.React.useRef(!0),D=e.React.useRef(new ye.Value(d&&s==="in"?1:0)).current;return e.React.useEffect(function(){if(!d&&E.current){E.current=!1;return}!d&&O.current&&(D.setValue(s==="in"?0:1),O.current=!1),ye.timing(D,{toValue:c??(s==="in"?1:0),duration:i,useNativeDriver:!0}).start()},[D,s,c,r]),e.React.createElement(ye.View,{style:[{opacity:D},u&&D._value===0&&{display:"none"},l]},a)}const{MMKVManager:Ge}=window.nativeModuleProxy,{ScrollView:ia,View:me,Pressable:na}=h.General,{FormSwitchRow:Xe,FormIcon:je,FormRow:R}=h.Forms,I={image:"https://discord.com/assets/cb1043c312ec65507573c06c37f6ee63.gif",appName:"Enter App Name...",details:"Enter Details...",state:"Enter State...",timestamp:"Enter Timestamp...",button1:"Edit Button 1...",button2:"Edit Button 2..."},Ye={0:"Playing",2:"Listening to",3:"Watching",5:"Competing in"},ra=e.stylesheet.createThemedStyleSheet({androidRipple:{color:m.semanticColors.ANDROID_RIPPLE,cornerRadius:8}});let ie;function sa(){const t=e.NavigationNative.useNavigation(),[i,a]=e.React.useReducer(function(d){return~d},0);if(ie=a,n.settings??={edit:!1,display:!1,debug:{enabled:!1,visible:!1,boykisserDead:void 0}},n.activity??={editing:ne()},n.profiles??=zt,it.useProxy(n),e.React.useEffect(function(){n.settings.debug.boykisserDead!==void 0&&pt(Ee.plugin,[{changes:["+ added boykisser back","+ you can now kill boykisser (don't)","+ fixed typo","+ added a string variables 'Help' button"]},{changes:["+ initial update guhhh"]}])},[n.settings.debug.boykisserDead===void 0]),e.React.useEffect(function(){n.settings.debug.boykisserDead!==void 0&&n.settings.display&&G()},[JSON.stringify(n.activity.editing),n.settings.display,n.settings.debug.boykisserDead===void 0]),n.settings.debug.boykisserDead===void 0)return Ge.getItem("CRPC_boykisser").then(function(d){n.settings.debug.boykisserDead=d==="true",a()}),e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}});const l=t.addListener("focus",function(){l(),t.setOptions({headerRight:function(){return e.React.createElement(me,{style:{flexDirection:"row-reverse"}},e.React.createElement(J,{style:"header",icon:o.getAssetIDByName("ic_report_message"),onPress:function(){return mt("customrpc")}}),e.React.createElement(J,{style:"header",icon:o.getAssetIDByName("ic_essentials_sparkle"),onPress:function(){return A.showConfirmationAlert({title:"String Variables",content:`String variables can be used in any text component
Here's the entire list:

${Ve.map(function(d){return`**\`${d.match}\`**
 \u2014 ${d.description}`}).join(`
`)}`,confirmText:"Dismiss",confirmColor:"brand",onConfirm:function(){}})}}))}})});let s=0,r,c=-1,u;return e.React.createElement(e.React.Fragment,null,e.React.createElement(aa,{style:[{backgroundColor:"#f11",position:"absolute",width:"100%",height:"100%",zIndex:2}],fade:"out",duration:1e3,trigger:n.settings.debug.boykisserDead,setDisplay:!0,animateOnInit:!1}),e.React.createElement(ia,{style:{zIndex:1}},e.React.createElement(X,{title:"Preview",onTitlePress:function(){if(n.settings.debug.enabled)n.settings.debug.visible=!n.settings.debug.visible,g.showToast(n.settings.debug.boykisserDead?`debug tab ${n.settings.debug.visible?"on":"off"}`:`Debug tab ${n.settings.debug.visible?"visible":"hidden"}`);else{if(r&&clearTimeout(r),r=setTimeout(function(){s=0},500),s++,s<2)return;if(s<7){const d=7-s;return g.showToast(n.settings.debug.boykisserDead?`tap ${d} more time${d!==1?"s":""}`:`${d} more taps`)}else g.showToast(n.settings.debug.boykisserDead?"the sin of murdering boykisser continues to haunt you":"Behold! You can now debug!"),n.settings.debug.visible=!0,n.settings.debug.enabled=!0,a()}},icon:o.getAssetIDByName("ic_eye"),padding:n.settings.edit},e.React.createElement(Pt,{edit:n.settings.edit,act:n.activity.editing})),e.React.createElement(X,{title:"Settings",icon:o.getAssetIDByName("ic_cog_24px")},e.React.createElement(Xe,{label:"Edit Mode",subLabel:"Be able to edit your activity",leading:e.React.createElement(je,{source:o.getAssetIDByName("ic_badge_staff")}),onValueChange:function(){return n.settings.edit=!n.settings.edit},value:n.settings.edit}),e.React.createElement(Xe,{label:"Display Activity",subLabel:"Show off your super awesome poggers activity to the world",leading:e.React.createElement(je,{source:o.getAssetIDByName("ic_show_password")}),onValueChange:function(){return n.settings.display=!n.settings.display},value:n.settings.display})),e.React.createElement(X,{title:"Data",icon:o.getAssetIDByName("ic_feedback")},e.React.createElement(R,{label:"Copy as JSON",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("copy")}),onPress:function(){e.clipboard.setString(JSON.stringify(n.activity.editing,void 0,3)),g.showToast("Copied",o.getAssetIDByName("toast_copy_link"))}}),e.React.createElement(R,{label:"Load from Clipboard",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_download_24px")}),onPress:function(){return te({role:"overwrite the activity data",button:"Overwrite",run:async function(){let d;try{d=JSON.parse(await e.clipboard.getString())}catch{return g.showToast("Failed to parse JSON",o.getAssetIDByName("Small"))}if(!Ke(d))return g.showToast("Invalid activity data",o.getAssetIDByName("Small"));n.activity.editing=la(d),delete n.activity.profile,a(),g.showToast("Loaded",o.getAssetIDByName("Check"))}})}}),e.React.createElement(Se,{addPadding:!0}),n.activity.profile&&e.React.createElement(R,{label:`Save Profile${Qe()?"":" \u{1F534}"}`,leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){n.profiles[n.activity.profile]=JSON.parse(JSON.stringify(n.activity.editing)),g.showToast("Saved",o.getAssetIDByName("Check")),a()}}),n.activity.profile&&e.React.createElement(R,{label:"Revert Profile",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return te({role:"revert",button:"Revert",run:function(){n.activity.editing=JSON.parse(JSON.stringify(n.profiles[n.activity.profile])),g.showToast("Reverted",o.getAssetIDByName("Check")),a()}})}}),n.activity.profile&&e.React.createElement(R,{label:"Close Profile",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_message_edit")}),onPress:function(){return te({role:"discard your changes",button:"Discard",run:function(){n.activity.editing=ne(),delete n.activity.profile,g.showToast("Closed",o.getAssetIDByName("Check")),a()},secondaryButton:"Save profile",secondaryRun:function(){n.profiles[n.activity.profile]=JSON.parse(JSON.stringify(n.activity.editing))}})}}),e.React.createElement(R,{label:"Browse Profiles",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_message_edit")}),trailing:e.React.createElement(R.Arrow,null),onPress:function(){return qt(t)}})),n.settings.debug.visible&&e.React.createElement(X,{title:"Debug",icon:o.getAssetIDByName("ic_progress_wrench_24px")},e.React.createElement(R,{label:"Live RawActivity View",trailing:e.React.createElement(R.Arrow,null),leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_badge_staff")}),onPress:function(){return ta(t)}}),e.React.createElement(R,{label:"Flush MP Cache",leading:e.React.createElement(R.Icon,{source:o.getAssetIDByName("ic_badge_staff")}),onPress:function(){let d=0;for(const O of Object.keys(N))d++,delete N[O];const E=":3,>:3,:D,>:D,:P,>:P".split(",");g.showToast(`flushed cache ${E[Math.floor(Math.random()*E.length)]}`),d>0&&G()}}),!n.settings.debug.boykisserDead&&e.React.createElement(e.React.Fragment,null,e.React.createElement(Se,{addPadding:!0}),e.React.createElement(me,{style:{paddingHorizontal:16,paddingBottom:16}},e.React.createElement(na,{android_ripple:ra.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityLabel:"boykisser",accessibilityHint:"tap to boykiss",onPress:function(){const d="nya,mwah,uwu,nya~,guh,blehhh >:P".split(",");g.showToast(d[Math.floor(Math.random()*d.length)])},delayLongPress:500,onLongPress:function(){if(n.settings.debug.boykisserDead)return g.showToast("fuck you");u&&clearTimeout(u),u=setTimeout(function(){c=-1},3e3),c++;const d=["tapping and holding on boykisser will kill him. are you sure?","i am serious, are you sure?","are you TOTALLY sure you want to kill him?","this cannot be undone","please, have mercy on him","this is your last warning, he will be forever killed","you don't want to do this","please, i beg you"];d[c]?g.showToast(d[c]):(n.settings.debug.boykisserDead=!0,Ge.setItem("CRPC_boykisser","true"),a(),g.showToast("you have MURDERED boykisser. fuck you"))}},e.React.createElement(e.ReactNative.Image,{source:{uri:"https://cdn.discordapp.com/attachments/919655852724604978/1126175249424191548/723.gif"},style:{borderRadius:8,width:"100%",aspectRatio:1}}))))),e.React.createElement(me,{style:{marginBottom:20}})))}var $;(function(t){t[t.Playing=0]="Playing",t[t.Listening=2]="Listening",t[t.Watching=3]="Watching",t[t.Competing=5]="Competing"})($||($={}));var he;(function(t){t[t.Instance=1]="Instance",t[t.Join=2]="Join",t[t.Spectate=4]="Spectate",t[t.JoinRequest=8]="JoinRequest",t[t.Sync=16]="Sync",t[t.Play=32]="Play",t[t.PartyPrivacyFriends=64]="PartyPrivacyFriends",t[t.PartyPrivacyVoiceChannel=128]="PartyPrivacyVoiceChannel",t[t.Embedded=256]="Embedded"})(he||(he={}));function Ke(t){if(!j(t)||!j(t.app)||"name"in t.app&&typeof t.app.name!="string"||"id"in t.app&&typeof t.app.id!="string"||"state"in t&&typeof t.state!="string"||"details"in t&&typeof t.details!="string"||!j(t.timestamps)||"start"in t.timestamps&&!(typeof t.timestamps.start=="number"||Q.find(function(i){return i.format===t.timestamps.start}))||"end"in t.timestamps&&!(typeof t.timestamps.end=="number"||Q.find(function(i){return i.format===t.timestamps.end}))||!j(t.assets)||"largeImg"in t.assets&&(typeof t.assets.largeImg!="string"||!(Y(t.assets.largeImg)||Z.find(function(i){return i.format===t.assets.largeImg})))||"smallImg"in t.assets&&(typeof t.assets.smallImg!="string"||!(Y(t.assets.smallImg)||Z.find(function(i){return i.format===t.assets.smallImg})))||!Array.isArray(t.buttons))return!1;for(const i of t.buttons)if(!("text"in i)||typeof i.text!="string"||"url"in i&&typeof i.url!="string")return!1;return!("type"in t&&!(t.type in $))}function la(t){return{app:{name:t.app.name,id:t.app.id},state:t.state,details:t.details,timestamps:{start:t.timestamps.start,end:t.timestamps.end},assets:{largeImg:t.assets.largeImg,smallImg:t.assets.smallImg},buttons:t.buttons.map(function(i){return{text:i.text,url:i.url}}),type:t.type}}function ne(){return{timestamps:{},assets:{},buttons:[],app:{}}}function We(t){const i=[],a={str:function(s){const r=_t(s);for(const c of r.types)i.includes(c)||i.push(c);return r.content},tim:function(s){const r=xt(s);return r.type&&!i.includes(r.type)&&i.push(r.type),r.timestamp!==void 0?ue(r.timestamp):void 0},img:function(s){const r=kt(s);return r.type&&!i.includes(r.type)&&i.push(r.type),r.image}},l={name:a.str(t.app.name??I.appName),application_id:t.app.id??"0",type:t.type??$.Playing,flags:he.Instance,state:t.state&&a.str(t.state),details:t.details&&a.str(t.details),timestamps:{start:t.timestamps.start!==void 0?a.tim(t.timestamps.start):void 0,end:t.timestamps.end!==void 0?a.tim(t.timestamps.end):void 0},assets:{large_image:t.assets.largeImg&&a.img(t.assets.largeImg),small_image:t.assets.smallImg&&a.img(t.assets.smallImg)}};return t.buttons[0]&&(l.metadata={button_urls:t.buttons.slice(0,2).filter(function(s){return!!s.text}).map(function(s){return s.url?a.str(s.url):null})},l.buttons=t.buttons.slice(0,2).filter(function(s){return!!s.text}).map(function(s){return a.str(s.text)})),L.lastRawActivity=l,L.lastRawActivityTimestamp=Date.now(),ze?.(),{activity:l,types:i}}async function Re(t){let i={};if(Ue(),t){const a=We(t);i=a.activity,$t(a.types)}e.FluxDispatcher.dispatch({type:"LOCAL_ACTIVITY_UPDATE",activity:i,pid:2689,socketId:"CustomRPC@Vendetta"})}function qe(){return n.profiles?.[n.activity?.profile]??n.activity?.editing??ne()}function G(){const t=qe();n.settings?.display?Re(t):Re()}function Qe(){const t=qe();return JSON.stringify(t)===JSON.stringify(n.activity.editing)}const{MMKVManager:ca}=window.nativeModuleProxy,n=tt.storage,L={lastRawActivity:void 0,lastRawActivityTimestamp:void 0};var oa={onLoad:async function(){n.settings.debug&&(n.settings.debug.boykisserDead=await ca.getItem("CRPC_boykisser")==="true"),G(),Bt()},onUnload:function(){Re(),Ue(!0)},settings:sa};return F.debug=L,F.default=oa,F.vstorage=n,Object.defineProperty(F,"__esModule",{value:!0}),F})({},vendetta.plugin,vendetta.metro.common,vendetta.ui.alerts,vendetta.metro,vendetta.ui,vendetta.ui.assets,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils,vendetta,vendetta.debug,vendetta.storage);
