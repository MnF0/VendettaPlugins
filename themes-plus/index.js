(function(a,r,y,m,l,v,E,ie,V){"use strict";function W(){const e=window[window.__vendetta_loader?.features?.themes?.prop];if(e)return e?.data?.plus}const S=l.findByStoreName("SelectivelySyncedUserSettingsStore");function T(e,t){e.style=Object.assign(r.ReactNative.StyleSheet.flatten(e.style)??{},t)}function I(){const e=S.getAppearanceSettings().theme.slice(),t=function(){S.removeChangeListener(t),r.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e}}}})};S.addChangeListener(t),r.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e==="light"?"dark":"light"}}}})}const{TextStyleSheet:z}=l.findByProps("TextStyleSheet"),{View:re,Text:B,Pressable:ce}=E.General;l.find(function(e){return e.render?.name==="ActionSheet"}),l.findByProps("openLazy","hideActionSheet"),l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");function A(e){const t=l.findByProps("colors","meta"),i=l.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(i.theme,e)}var D;(function(e){function t(n){let{children:c,onPress:s}=n;return r.React.createElement(f,{variant:"text-md/bold",onPress:s},c)}e.Bold=t;function i(n){let{children:c,onPress:s}=n;return r.React.createElement(B,{style:{textDecorationLine:"underline"},onPress:s},c)}e.Underline=i})(D||(D={}));function f(e){let{variant:t,lineClamp:i,color:n,align:c,style:s,onPress:d,getChildren:o,children:p,liveUpdate:R}=e;const[h,_]=r.React.useReducer(function(g){return~g},0);return r.React.useEffect(function(){if(!R)return;const g=new Date().setMilliseconds(1e3);let j,G;return G=setTimeout(function(){_(),j=setInterval(_,1e3)},g-Date.now()),function(){clearTimeout(G),clearInterval(j)}},[]),r.React.createElement(B,{style:[t?z[t]:{},n?{color:A(v.semanticColors[n])}:{},c?{textAlign:c}:{},s??{}],numberOfLines:i,onPress:d},o?.()??p)}const H=l.findByStoreName("UnsyncedUserSettingsStore");function X(e){const t=H.useAMOLEDTheme;if(t===3)return e.darker??e.dark;if(t===2)return e.amoled??e.dark;if(t===1)return e.light;if(t===0)return e.dark}function b(e){if(Array.isArray(e))return X({dark:e[0],light:e[1],amoled:e[2],darker:e[3]});if(e.startsWith("SC_"))return v.semanticColors[e.slice(3)]?A(v.semanticColors[e.slice(3)]):"#ffffff";if(e.startsWith("RC_"))return v.rawColors[e.slice(3)]??"#ffffff";if(e.startsWith("#")&&e.length===4)return`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`;if(e.startsWith("#")&&e.length===7)return e}function Y(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;const[i,n,c,s]=e.match(/#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i);return(t&255)<<24|(parseInt(n,16)&255)<<16|(parseInt(c,16)&255)<<8|parseInt(s,16)&255}function L(e,t,i){const n=i??m.getAssetByID(t)?.name;if(n&&e.icons[n])return b(e.icons[n])}function w(e,t,i){if(typeof i.props.source=="number"){const n=L(e,i.props.source,t);n&&T(i.props,{tintColor:n})}return i.props.ignore=!0,i}function N(e){if(e.unreadBadgeColor)return b(e.unreadBadgeColor)}const{View:P}=E.General,{MaskedBadge:q}=l.findByProps("MaskedBadge"),K=r.stylesheet.createThemedStyleSheet({maskPins:{position:"absolute",right:-10,bottom:-10,backgroundColor:v.semanticColors.BACKGROUND_SECONDARY}}),U="https://cdn.discordapp.com/attachments/919655852724604978/1134434803228344360/inner_check.png";function J(e,t,i){const n=m.getAssetByID(t)?.name;if(n){if(["ic_new_pins_light","ic_new_pins"].includes(n))return{replace:n.includes("light")?"icon-pins":"ic_pins",children:React.createElement(P,{style:{position:"absolute",right:0,bottom:0}},React.createElement(q,{maskStyle:K.maskPins,value:1,hideCount:!0}))};if(["ic_selection_checked_24px","ic_radio_square_checked_24px","ic_check","ic_radio_circle_checked"].includes(n))return{style:{tintColor:"#5865F2"},children:React.createElement(P,{style:{position:"absolute",left:0,top:0}},w(e,`${n}__overlay`,React.createElement(r.ReactNative.Image,{source:{uri:U},style:[...i,{tintColor:"#FFF"}]})))};if(["app_installed_check","ic_radio_circle_checked_green"].includes(n))return{style:{tintColor:"#3BA55C"},children:React.createElement(P,{style:{position:"absolute",left:0,top:0}},w(e,`${n}__overlay`,React.createElement(r.ReactNative.Image,{source:{uri:U},style:[...i,{tintColor:"#FFF"}]})))}}}var O={iconpacks:{list:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/list.json",assets:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/assets/"}};function Q(e){const[t,i]=r.React.useState(!1);return r.React.createElement(r.ReactNative.Image,{source:t?e.fallback:e.image,style:e.style,onError:function(){return i(!0)},ignore:e.ignore})}const{View:Z}=E.General,$=l.findByProps("MaskedBadge"),ee=l.findByProps("createBackgroundHighlight");async function te(){const e=new Array,t=W();u.patches.length=0;const i=await(await fetch(O.iconpacks.list)).json();if(!a.enabled)return function(){};if(t?.version!==void 0){if(u.active=!0,t.icons||t.customOverlays||t.iconpack){t.icons&&u.patches.push(a.PatchType.Icons),t.customOverlays&&u.patches.push(a.PatchType.CustomIconOverlays),t.iconpack&&u.patches.push(a.PatchType.IconPack);const n=i.list.find(function(s){return s.id===t.iconpack}),c=n&&(n.load?n.load.endsWith("/")?n.load:n.load+"/":`${O.iconpacks.assets}${n.id}/`);e.push(y.instead("render",r.ReactNative.Image,function(s,d){const[o]=s;if(!o.source||typeof o.source!="number"||o.ignore)return d(...s);let p=o.source;const R=m.getAssetByID(p);let h;if(t.customOverlays&&!n&&(h=J(t,p,o.style?Array.isArray(o.style)?o.style:[o.style]:[]),h&&(h.replace&&(o.source=m.getAssetIDByName(h.replace)),h.style&&T(o,h.style))),t.icons){const g=L(t,p);g&&T(o,{tintColor:g})}const _=n?React.createElement(Q,{image:{uri:`${c}${[...R.httpServerLocation.split("/").slice(2),`${R.name}@2x.${R.type}`].join("/")}`},fallback:p,style:o.style,ignore:!0}):d(...s);return h?.children&&!n?React.createElement(Z,null,_,h.children):_}))}t.unreadBadgeColor&&(u.patches.push(a.PatchType.UnreadBadgeColor),e.push(y.after("MaskedBadge",$,function(n,c){const s=c&&V.findInReactTree(c,function(d){return d?.type?.name==="Badge"});s&&e.push(y.after("type",s,function(d,o){return o?.props&&T(o.props,{backgroundColor:N(t)})},!0))})),e.push(y.after("default",$,function(n,c){return c?.props&&T(c.props,{backgroundColor:N(t)})}))),t.mentionLineColor&&(u.patches.push(a.PatchType.MentionLineColor),e.push(y.after("createBackgroundHighlight",ee,function(n,c){let[s]=n;const d=b(t.mentionLineColor);s?.message?.mentioned&&d&&(c.gutterColor=Y(d,200))})))}else u.active=!1;return u.patches[0]&&I(),function(){I(),e.forEach(function(n){return n()})}}const{View:C}=E.General,x="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/",{TextStyleSheet:k}=l.findByProps("TextStyleSheet");function ne(){return React.createElement(C,{style:{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},u.active?React.createElement(React.Fragment,null,React.createElement(C,{style:{flexDirection:"row",justifyContent:"center",marginBottom:16}},React.createElement(r.ReactNative.Image,{source:{uri:`${x}2705.png`},style:{height:k["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(f,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL"},"Themes+ is Active")),React.createElement(C,{style:{flexDirection:"column",marginHorizontal:16}},Object.values(a.PatchType).filter(function(e){return typeof e=="number"}).map(function(e){return React.createElement(C,{style:{flexDirection:"row"}},React.createElement(r.ReactNative.Image,{source:m.getAssetIDByName(u.patches.includes(e)?"ic_radio_square_checked_24px":"ic_radio_square_24px"),style:{marginRight:8,height:k["text-lg/semibold"].fontSize,aspectRatio:1/1,marginTop:4}}),React.createElement(f,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},M[e]))}))):React.createElement(C,{style:{flexDirection:"row",justifyContent:"center"}},React.createElement(r.ReactNative.Image,{source:{uri:`${x}274c.png`},style:{height:k["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(f,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL"},"Themes+ is not Active")),React.createElement(f,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:32},onPress:function(){return r.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#info")}},"Why is Themes+ inactive?"),React.createElement(f,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:4},onPress:function(){return r.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#using-vendetta-themes")}},"How to use Themes+?"))}a.PatchType=void 0,function(e){e[e.Icons=0]="Icons",e[e.UnreadBadgeColor=1]="UnreadBadgeColor",e[e.CustomIconOverlays=2]="CustomIconOverlays",e[e.MentionLineColor=3]="MentionLineColor",e[e.IconPack=4]="IconPack"}(a.PatchType||(a.PatchType={}));const M=Object.fromEntries([[a.PatchType.Icons,"Custom icon colors"],[a.PatchType.UnreadBadgeColor,"Unread badge color"],[a.PatchType.CustomIconOverlays,"Custom icon overlays"],[a.PatchType.MentionLineColor,"Mention line color"],[a.PatchType.IconPack,"Custom icon pack"]]);let u={active:!1,patches:[]};a.enabled=!1;let F;var ae={onLoad:async function(){a.enabled=!0,F=await te()},onUnload:function(){a.enabled=!1,F?.()},settings:ne};return a.active=u,a.default=ae,a.patchTypeReadable=M,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils);
