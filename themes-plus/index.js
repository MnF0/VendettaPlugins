(function(a,i,m,T,l,v,S,se,X){"use strict";function Y(){const e=window[window.__vendetta_loader?.features?.themes?.prop];if(e)return e?.data?.plus}const b=l.findByStoreName("SelectivelySyncedUserSettingsStore");function D(e){return i.ReactNative.StyleSheet.flatten(e)??{}}function C(e,t){e.style=Object.assign(D(e.style),t)}function L(){const e=b.getAppearanceSettings().theme.slice(),t=function(){b.removeChangeListener(t),i.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e}}}})};b.addChangeListener(t),i.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e==="light"?"dark":"light"}}}})}const{TextStyleSheet:q}=l.findByProps("TextStyleSheet"),{View:oe,Text:N,Pressable:le}=S.General;l.find(function(e){return e.render?.name==="ActionSheet"}),l.findByProps("openLazy","hideActionSheet"),l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");function U(e){const t=l.findByProps("colors","meta"),r=l.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(r.theme,e)}var O;(function(e){function t(n){let{children:s,onPress:o}=n;return i.React.createElement(g,{variant:"text-md/bold",onPress:o},s)}e.Bold=t;function r(n){let{children:s,onPress:o}=n;return i.React.createElement(N,{style:{textDecorationLine:"underline"},onPress:o},s)}e.Underline=r})(O||(O={}));function g(e){let{variant:t,lineClamp:r,color:n,align:s,style:o,onPress:h,getChildren:p,children:c,liveUpdate:_}=e;const[f,y]=i.React.useReducer(function(d){return~d},0);return i.React.useEffect(function(){if(!_)return;const d=new Date().setMilliseconds(1e3);let w,E;return E=setTimeout(function(){y(),w=setInterval(y,1e3)},d-Date.now()),function(){clearTimeout(E),clearInterval(w)}},[]),i.React.createElement(N,{style:[t?q[t]:{},n?{color:U(v.semanticColors[n])}:{},s?{textAlign:s}:{},o??{}],numberOfLines:r,onPress:h},p?.()??c)}const K=l.findByStoreName("UnsyncedUserSettingsStore");function J(e){const t=K.useAMOLEDTheme;if(t===3)return e.darker??e.dark;if(t===2)return e.amoled??e.dark;if(t===1)return e.light;if(t===0)return e.dark}function k(e){if(Array.isArray(e))return J({dark:e[0],light:e[1],amoled:e[2],darker:e[3]});if(e.startsWith("SC_"))return v.semanticColors[e.slice(3)]?U(v.semanticColors[e.slice(3)]):"#ffffff";if(e.startsWith("RC_"))return v.rawColors[e.slice(3)]??"#ffffff";if(e.startsWith("#")&&e.length===4)return`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`;if(e.startsWith("#")&&e.length===7)return e}function Q(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;const[r,n,s,o]=e.match(/#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i);return(t&255)<<24|(parseInt(n,16)&255)<<16|(parseInt(s,16)&255)<<8|parseInt(o,16)&255}function $(e,t,r){const n=r??T.getAssetByID(t)?.name;if(n&&e.icons[n])return k(e.icons[n])}function x(e,t,r){if(typeof r.props.source=="number"){const n=$(e,r.props.source,t);n&&C(r.props,{tintColor:n})}return r.props.ignore=!0,r}function M(e){if(e.unreadBadgeColor)return k(e.unreadBadgeColor)}const{View:I}=S.General,{MaskedBadge:Z}=l.findByProps("MaskedBadge"),ee=i.stylesheet.createThemedStyleSheet({maskPins:{position:"absolute",right:-10,bottom:-10,backgroundColor:v.semanticColors.BACKGROUND_SECONDARY}}),j="https://cdn.discordapp.com/attachments/919655852724604978/1134434803228344360/inner_check.png";function te(e,t,r){const n=T.getAssetByID(t)?.name;if(n){if(["ic_new_pins_light","ic_new_pins"].includes(n))return{replace:n.includes("light")?"icon-pins":"ic_pins",children:React.createElement(I,{style:{position:"absolute",right:0,bottom:0}},React.createElement(Z,{maskStyle:ee.maskPins,value:1,hideCount:!0}))};if(["ic_selection_checked_24px","ic_radio_square_checked_24px","ic_check","ic_radio_circle_checked"].includes(n))return{style:{tintColor:"#5865F2"},children:React.createElement(I,{style:{position:"absolute",left:0,top:0}},x(e,`${n}__overlay`,React.createElement(i.ReactNative.Image,{source:{uri:j},style:[...r,{tintColor:"#FFF"}]})))};if(["app_installed_check","ic_radio_circle_checked_green"].includes(n))return{style:{tintColor:"#3BA55C"},children:React.createElement(I,{style:{position:"absolute",left:0,top:0}},x(e,`${n}__overlay`,React.createElement(i.ReactNative.Image,{source:{uri:j},style:[...r,{tintColor:"#FFF"}]})))}}}var F={iconpacks:{list:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/list.json",assets:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/assets/"}};const{View:ne}=S.General,G=l.findByProps("MaskedBadge"),ae=l.findByProps("createBackgroundHighlight"),B=new Array;async function ie(){const e=new Array,t=Y();u.patches.length=0;const r=await(await fetch(F.iconpacks.list)).json();if(!a.enabled)return function(){};if(t?.version!==void 0){if(u.active=!0,t.icons||t.customOverlays||t.iconpack){t.icons&&u.patches.push(a.PatchType.Icons),t.customOverlays&&u.patches.push(a.PatchType.CustomIconOverlays),t.iconpack&&u.patches.push(a.PatchType.IconPack);const n=r.list.find(function(o){return o.id===t.iconpack}),s=n&&(n.load?n.load.endsWith("/")?n.load:n.load+"/":`${F.iconpacks.assets}${n.id}/`);e.push(m.instead("render",i.ReactNative.Image,function(o,h){const p=o.slice(),[c]=p;if(!c.source||typeof c.source!="number"||c.ignore)return h(...p);let _=c.source;const f=T.getAssetByID(_),y=!B.includes(f.name);let d;if(t.customOverlays&&!y&&(d=te(t,_,c.style?Array.isArray(c.style)?c.style:[c.style]:[]),d&&(d.replace&&(c.source=T.getAssetIDByName(d.replace)),d.style&&C(c,d.style))),t.icons){const P=$(t,_);P&&C(c,{tintColor:P})}const[w,E]=i.React.useReducer(function(P){return~P},0);y&&(c.onError=function(){B.includes(f.name)||B.push(f.name),E()},c.source={uri:`${s}${[...f.httpServerLocation.split("/").slice(2),`${f.name}@2x.${f.type}`].join("/")}`},c.style=D(c.style),c.style.width??=f.width,c.style.height??=f.height);const z=h(...p);return d?.children&&!y?i.React.createElement(ne,null,z,d.children):z}))}t.unreadBadgeColor&&(u.patches.push(a.PatchType.UnreadBadgeColor),e.push(m.after("MaskedBadge",G,function(n,s){const o=s&&X.findInReactTree(s,function(h){return h?.type?.name==="Badge"});o&&e.push(m.after("type",o,function(h,p){return p?.props&&C(p.props,{backgroundColor:M(t)})},!0))})),e.push(m.after("default",G,function(n,s){return s?.props&&C(s.props,{backgroundColor:M(t)})}))),t.mentionLineColor&&(u.patches.push(a.PatchType.MentionLineColor),e.push(m.after("createBackgroundHighlight",ae,function(n,s){let[o]=n;const h=k(t.mentionLineColor);o?.message?.mentioned&&h&&(s.gutterColor=Q(h,200))})))}else u.active=!1;return u.patches[0]&&L(),function(){L(),e.forEach(function(n){return n()})}}const{View:R}=S.General,V="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/",{TextStyleSheet:A}=l.findByProps("TextStyleSheet");function re(){return React.createElement(R,{style:{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},u.active?React.createElement(React.Fragment,null,React.createElement(R,{style:{flexDirection:"row",justifyContent:"center",marginBottom:16}},React.createElement(i.ReactNative.Image,{source:{uri:`${V}2705.png`},style:{height:A["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(g,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL"},"Themes+ is Active")),React.createElement(R,{style:{flexDirection:"column",marginHorizontal:16}},Object.values(a.PatchType).filter(function(e){return typeof e=="number"}).map(function(e){return React.createElement(R,{style:{flexDirection:"row"}},React.createElement(i.ReactNative.Image,{source:T.getAssetIDByName(u.patches.includes(e)?"ic_radio_square_checked_24px":"ic_radio_square_24px"),style:{marginRight:8,height:A["text-lg/semibold"].fontSize,aspectRatio:1/1,marginTop:4}}),React.createElement(g,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},H[e]))}))):React.createElement(R,{style:{flexDirection:"row",justifyContent:"center"}},React.createElement(i.ReactNative.Image,{source:{uri:`${V}274c.png`},style:{height:A["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(g,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL"},"Themes+ is not Active")),React.createElement(g,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:32},onPress:function(){return i.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#info")}},"Why is Themes+ inactive?"),React.createElement(g,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:4},onPress:function(){return i.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#using-vendetta-themes")}},"How to use Themes+?"))}a.PatchType=void 0,function(e){e[e.Icons=0]="Icons",e[e.UnreadBadgeColor=1]="UnreadBadgeColor",e[e.CustomIconOverlays=2]="CustomIconOverlays",e[e.MentionLineColor=3]="MentionLineColor",e[e.IconPack=4]="IconPack"}(a.PatchType||(a.PatchType={}));const H=Object.fromEntries([[a.PatchType.Icons,"Custom icon colors"],[a.PatchType.UnreadBadgeColor,"Unread badge color"],[a.PatchType.CustomIconOverlays,"Custom icon overlays"],[a.PatchType.MentionLineColor,"Mention line color"],[a.PatchType.IconPack,"Custom icon pack"]]);let u={active:!1,patches:[]};a.enabled=!1;let W;var ce={onLoad:async function(){a.enabled=!0,W=await ie()},onUnload:function(){a.enabled=!1,W?.()},settings:re};return a.active=u,a.default=ce,a.patchTypeReadable=H,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils);
