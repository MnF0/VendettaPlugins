(function(o,a,C,T,s,E,m,U,D,ie,ce,x,M,oe){"use strict";function se(){const e=window[window.__vendetta_loader?.features?.themes?.prop];if(e)return e?.data?.plus}const b=s.findByStoreName("SelectivelySyncedUserSettingsStore");function $(e){return a.ReactNative.StyleSheet.flatten(e)??{}}function k(e,t){e.style=Object.assign($(e.style),t)}function O(){const e=b.getAppearanceSettings().theme.slice(),t=function(){b.removeChangeListener(t),a.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e}}}})};b.addChangeListener(t),a.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e==="light"?"dark":"light"}}}})}const le=s.findByStoreName("ThemeStore"),ue=s.findByProps("colors","meta"),{TextStyleSheet:de}=s.findByProps("TextStyleSheet"),{View:Fe,Text:F,Pressable:Ge}=m.General,G=s.find(function(e){return e.render?.name==="ActionSheet"}),{openLazy:he,hideActionSheet:fe}=s.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:pe,ActionSheetCloseButton:ge,ActionSheetContentContainer:ye}=s.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),me=s.findByName("Navigator"),{getRenderCloseButton:Re}=s.findByProps("getRenderCloseButton"),{popModal:V,pushModal:Te}=s.findByProps("popModal","pushModal");function I(e){return ue.meta.resolveSemanticColor(le.theme,e)}function ve(e,t){G?he(new Promise(function(i){return i({default:e})}),"ActionSheet",t):U.showToast("You cannot open ActionSheets on this version! Update to 163+",T.getAssetIDByName("Small"))}function j(e,t){Te({key:e,modal:{key:e,modal:t,animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}function Ee(e){return a.React.createElement(me,{initialRouteName:e.mkey,screens:{[e.mkey]:Object.assign(D.without(e,"mkey","children"),{headerLeft:Re(function(){return V(e.mkey)}),render:function(){return e.children}})}})}var z;(function(e){function t(n){let{children:r,onPress:c}=n;return a.React.createElement(y,{variant:"text-md/bold",onPress:c},r)}e.Bold=t;function i(n){let{children:r,onPress:c}=n;return a.React.createElement(F,{style:{textDecorationLine:"underline"},onPress:c},r)}e.Underline=i})(z||(z={}));function y(e){let{variant:t,lineClamp:i,color:n,align:r,style:c,onPress:d,getChildren:f,children:R,liveUpdate:l}=e;const[_,p]=a.React.useReducer(function(v){return~v},0);return a.React.useEffect(function(){if(!l)return;const v=new Date().setMilliseconds(1e3);let g,P;return P=setTimeout(function(){p(),g=setInterval(p,1e3)},v-Date.now()),function(){clearTimeout(P),clearInterval(g)}},[]),a.React.createElement(F,{style:[t?de[t]:{},n?{color:I(E.semanticColors[n])}:{},r?{textAlign:r}:{},c??{}],numberOfLines:i,onPress:d},f?.()??R)}const Ce=s.findByStoreName("UnsyncedUserSettingsStore");function ke(e){const t=Ce.useAMOLEDTheme;if(t===3)return e.darker??e.dark;if(t===2)return e.amoled??e.dark;if(t===1)return e.light;if(t===0)return e.dark}function A(e){if(Array.isArray(e))return ke({dark:e[0],light:e[1],amoled:e[2],darker:e[3]});if(e.startsWith("SC_"))return E.semanticColors[e.slice(3)]?I(E.semanticColors[e.slice(3)]):"#ffffff";if(e.startsWith("RC_"))return E.rawColors[e.slice(3)]??"#ffffff";if(e.startsWith("#")&&e.length===4)return`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`;if(e.startsWith("#")&&e.length===7)return e}function Se(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;const[i,n,r,c]=e.match(/#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i);return(t&255)<<24|(parseInt(n,16)&255)<<16|(parseInt(r,16)&255)<<8|parseInt(c,16)&255}function X(e,t,i){const n=i??T.getAssetByID(t)?.name;if(n&&e.icons[n])return A(e.icons[n])}function H(e,t,i){if(typeof i.props.source=="number"){const n=X(e,i.props.source,t);n&&k(i.props,{tintColor:n})}return i.props.ignore=!0,i}function W(e){if(e.unreadBadgeColor)return A(e.unreadBadgeColor)}const{View:B}=m.General,{MaskedBadge:Pe}=s.findByProps("MaskedBadge"),_e=a.stylesheet.createThemedStyleSheet({maskPins:{position:"absolute",right:-10,bottom:-10,backgroundColor:E.semanticColors.BACKGROUND_SECONDARY}}),Y="https://cdn.discordapp.com/attachments/919655852724604978/1134434803228344360/inner_check.png";function be(e,t,i){const n=T.getAssetByID(t)?.name;if(n){if(["ic_new_pins_light","ic_new_pins"].includes(n))return{replace:n.includes("light")?"icon-pins":"ic_pins",children:React.createElement(B,{style:{position:"absolute",right:0,bottom:0}},React.createElement(Pe,{maskStyle:_e.maskPins,value:1,hideCount:!0}))};if(["ic_selection_checked_24px","ic_radio_square_checked_24px","ic_check","ic_radio_circle_checked"].includes(n))return{style:{tintColor:"#5865F2"},children:React.createElement(B,{style:{position:"absolute",left:0,top:0}},H(e,`${n}__overlay`,React.createElement(a.ReactNative.Image,{source:{uri:Y},style:[...i,{tintColor:"#FFF"}]})))};if(["app_installed_check","ic_radio_circle_checked_green"].includes(n))return{style:{tintColor:"#3BA55C"},children:React.createElement(B,{style:{position:"absolute",left:0,top:0}},H(e,`${n}__overlay`,React.createElement(a.ReactNative.Image,{source:{uri:Y},style:[...i,{tintColor:"#FFF"}]})))}}}var K={iconpacks:{list:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/list.json",assets:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/assets/"}};const{View:Ie}=m.General,q=s.findByProps("MaskedBadge"),Ae=s.findByProps("createBackgroundHighlight"),Be=s.findByStoreName("UserStore"),w=new Array;async function we(){const e=new Array,t=se();u.patches.length=0;const i=await(await fetch(K.iconpacks.list)).json();if(!o.enabled)return function(){};const n=Be.getCurrentUser();if(t?.version!==void 0){if(u.active=!0,t.icons||t.customOverlays||t.iconpack||h.iconpack?.url){t.icons&&u.patches.push(o.PatchType.Icons),t.customOverlays&&u.patches.push(o.PatchType.CustomIconOverlays),(t.iconpack||h.iconpack?.url)&&u.patches.push(o.PatchType.IconPack);const r=h.iconpack?.url?{id:"custom-iconpack",description:"A custom iconpack!",credits:{authors:[`${n.username} <${n.id}>`],source:"N/A"},suffix:h.iconpack.suffix,load:h.iconpack.url}:i.list.find(function(d){return d.id===t.iconpack});u.iconpack=r??null;const c=r&&(r.load?r.load.endsWith("/")?r.load:r.load+"/":`${K.iconpacks.assets}${r.id}/`);e.push(C.instead("render",a.ReactNative.Image,function(d,f){const R=d.slice(),[l]=R;if(!l.source||typeof l.source!="number"||l.ignore)return f(...R);let _=l.source;const p=T.getAssetByID(_),v=r&&!w.includes(p.name);let g;if(t.customOverlays&&!v&&(g=be(t,_,l.style?Array.isArray(l.style)?l.style:[l.style]:[]),g&&(g.replace&&(l.source=T.getAssetIDByName(g.replace)),g.style&&k(l,g.style))),t.icons){const re=X(t,_);re&&k(l,{tintColor:re})}v&&(l.onError=function(){w.includes(p.name)||w.push(p.name)},l.source={uri:`${c}${[...p.httpServerLocation.split("/").slice(2),`${p.name}${r.suffix}.${p.type}`].join("/")}`},l.style=$(l.style),l.style.width??=p.width,l.style.height??=p.height,l.style.tintColor??=I(E.semanticColors.INTERACTIVE_NORMAL));const P=f(...R);return g?.children&&!v?a.React.createElement(Ie,null,P,g.children):P}))}t.unreadBadgeColor&&(u.patches.push(o.PatchType.UnreadBadgeColor),e.push(C.after("MaskedBadge",q,function(r,c){const d=c&&D.findInReactTree(c,function(f){return f?.type?.name==="Badge"});d&&e.push(C.after("type",d,function(f,R){return R?.props&&k(R.props,{backgroundColor:W(t)})},!0))})),e.push(C.after("default",q,function(r,c){return c?.props&&k(c.props,{backgroundColor:W(t)})}))),t.mentionLineColor&&(u.patches.push(o.PatchType.MentionLineColor),e.push(C.after("createBackgroundHighlight",Ae,function(r,c){let[d]=r;const f=A(t.mentionLineColor);d?.message?.mentioned&&f&&(c.gutterColor=Se(f,200))})))}else u.active=!1;return u.patches[0]&&O(),function(){O(),e.forEach(function(r){return r()})}}const{BadgableTabBar:Ne}=s.findByProps("BadgableTabBar"),{ScrollView:Le,View:Ue}=m.General,{FormInput:J}=m.Forms;function Q(){const[e,t]=a.React.useState("iconpack");return h.iconpack??={url:null,suffix:""},ie.useProxy(h),a.React.createElement(Ee,{mkey:"dev-modal",title:"Developer Modal"},a.React.createElement(Le,null,a.React.createElement(Ue,{style:{marginHorizontal:16,marginVertical:16}},a.React.createElement(Ne,{activeTab:e,onTabSelected:t,tabs:[{id:"iconpack",title:"Custom Iconpack"}]})),e==="iconpack"&&a.React.createElement(a.React.Fragment,null,a.React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL",style:{marginHorizontal:16}},"Uses a custom iconpack, regardless of the current theme's settings"),a.React.createElement(J,{title:"Root URL (raw.githubusercontent.com)",value:h.iconpack.url??"",onChange:function(i){return h.iconpack.url=i.match(ce.HTTP_REGEX_MULTI)?.[0]??null}}),a.React.createElement(J,{title:"Icon Suffix",value:h.iconpack.suffix,onChange:function(i){return h.iconpack.suffix=i}}),a.React.createElement(m.Button,{size:"small",color:"green",text:"Reload",onPress:function(){x.stopPlugin(M.plugin.id,!0),V("dev-modal"),x.startPlugin(M.plugin.id)},style:{marginHorizontal:16}}))))}const{showUserProfile:Z}=s.findByProps("showUserProfile"),{fetchProfile:ee}=s.findByProps("fetchProfile"),N=s.findByStoreName("UserStore");function De(e){let{userId:t,color:i,loadUsername:n,children:r}=e;const[c,d]=a.React.useState(!1);return a.React.useEffect(function(){return!c&&n&&(N.getUser(t)?d(N.getUser(t).username):ee(t).then(function(f){return d(f.user.username)}))},[n]),a.React.createElement(y,{variant:"text-md/bold",color:i??"TEXT_NORMAL",onPress:function(){return N.getUser(t)?Z({userId:t}):ee(t).then(function(){return Z({userId:t})})}},n?`@${c??"..."}`:r)}const{FormRow:xe}=m.Forms,te=function(e){const t=e.split(" <");return t[1]?[t[0],t[1].slice(0,-1)]:[t[0]]};function Me(e){const{iconpack:t}=u,i=[];if(t)for(let n=0;n<t.credits.authors.length;n++){const r=te(t.credits.authors[n]);r[1]?i.push(React.createElement(De,{userId:r[1],loadUsername:!1,color:"TEXT_LINK"},r[0])):i.push(r[0]),n!==t.credits.authors.length-1&&i.push(", ")}return React.createElement(G,null,React.createElement(ye,null,t?React.createElement(React.Fragment,null,React.createElement(pe,{title:t.id,trailing:React.createElement(ge,{onPress:function(){return fe()}})}),[["Description",[t.description]],["Authors",i,t.credits.authors.map(function(n){return te(n)[0]}).join(", ")],["Description",[t.description]],["Source",[t.credits.source]],["Icon Suffix",[t.suffix??"N/A"]],["Load URL",[t.load??"N/A"]]].map(function(n){let[r,c,d]=n;return React.createElement(xe,{label:c,subLabel:r,onLongPress:function(){a.clipboard.setString(d??c.join("")),U.showToast("Copied",T.getAssetIDByName("toast_copy_link"))}})})):React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL"},"womp womp")))}const{View:S}=m.General,ne="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/",{TextStyleSheet:L}=s.findByProps("TextStyleSheet");function $e(){let e=0;return React.createElement(S,{style:{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},u.active?React.createElement(React.Fragment,null,React.createElement(S,{style:{flexDirection:"row",justifyContent:"center",marginBottom:16}},React.createElement(a.ReactNative.Image,{source:{uri:`${ne}2705.png`},style:{height:L["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(y,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL",onPress:function(){return e>=Date.now()?j("dev-modal",Q):e=Date.now()+500}},"Themes+ is Active")),React.createElement(S,{style:{flexDirection:"column",marginHorizontal:16}},[[o.PatchType.Icons,["Custom icon colors"]],[o.PatchType.UnreadBadgeColor,["Unread badge color"]],[o.PatchType.CustomIconOverlays,["Custom icon overlays"]],[o.PatchType.MentionLineColor,["Mention line color"]],[o.PatchType.IconPack,u.iconpack?[React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",onPress:function(){return ve(Me,{})}},"Custom icon pack")]:["Custom icon pack"]]].map(function(t){let[i,n]=t;return React.createElement(S,{style:{flexDirection:"row"}},React.createElement(a.ReactNative.Image,{source:T.getAssetIDByName(u.patches.includes(i)?"ic_radio_square_checked_24px":"ic_radio_square_24px"),style:{marginRight:8,height:L["text-lg/semibold"].fontSize,aspectRatio:1/1,marginTop:4}}),React.createElement(y,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},n))}))):React.createElement(S,{style:{flexDirection:"row",justifyContent:"center"}},React.createElement(a.ReactNative.Image,{source:{uri:`${ne}274c.png`},style:{height:L["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(y,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL",onPress:function(){return e>=Date.now()?j("dev-modal",Q):e=Date.now()+500}},"Themes+ is not Active")),React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:32},onPress:function(){return a.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#info")}},"Why is Themes+ inactive?"),React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:4},onPress:function(){return a.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#using-vendetta-themes")}},"How to use Themes+?"))}o.PatchType=void 0,function(e){e[e.Icons=0]="Icons",e[e.UnreadBadgeColor=1]="UnreadBadgeColor",e[e.CustomIconOverlays=2]="CustomIconOverlays",e[e.MentionLineColor=3]="MentionLineColor",e[e.IconPack=4]="IconPack"}(o.PatchType||(o.PatchType={}));let u={active:!1,iconpack:null,patches:[]};const h=oe.storage;o.enabled=!1;let ae;var Oe={onLoad:async function(){o.enabled=!0,ae=await we()},onUnload:function(){o.enabled=!1,ae?.()},settings:$e};return o.active=u,o.default=Oe,o.vstorage=h,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils,vendetta.storage,vendetta.constants,vendetta.plugins,vendetta,vendetta.plugin);
