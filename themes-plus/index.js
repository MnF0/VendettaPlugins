(function(o,a,E,v,s,k,m,U,D,ce,oe,x,M,se){"use strict";function le(){const e=window[window.__vendetta_loader?.features?.themes?.prop];if(e)return e?.data?.plus}const b=s.findByStoreName("SelectivelySyncedUserSettingsStore");function $(e){return a.ReactNative.StyleSheet.flatten(e)??{}}function C(e,t){e.style=Object.assign($(e.style),t)}function O(){const e=b.getAppearanceSettings().theme.slice(),t=function(){b.removeChangeListener(t),a.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e}}}})};b.addChangeListener(t),a.FluxDispatcher.dispatch({type:"SELECTIVELY_SYNCED_USER_SETTINGS_UPDATE",changes:{appearance:{settings:{theme:e==="light"?"dark":"light"}}}})}const{TextStyleSheet:ue}=s.findByProps("TextStyleSheet"),{View:Fe,Text:F,Pressable:je}=m.General,j=s.find(function(e){return e.render?.name==="ActionSheet"}),{openLazy:de,hideActionSheet:he}=s.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:fe,ActionSheetCloseButton:pe,ActionSheetContentContainer:ge}=s.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),ye=s.findByName("Navigator"),{getRenderCloseButton:me}=s.findByProps("getRenderCloseButton"),{popModal:V,pushModal:Re}=s.findByProps("popModal","pushModal");function G(e){const t=s.findByProps("colors","meta"),r=s.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(r.theme,e)}function ve(e,t){j?de(new Promise(function(r){return r({default:e})}),"ActionSheet",t):U.showToast("You cannot open ActionSheets on this version! Update to 163+",v.getAssetIDByName("Small"))}function z(e,t){Re({key:e,modal:{key:e,modal:t,animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}function Te(e){return a.React.createElement(ye,{initialRouteName:e.mkey,screens:{[e.mkey]:Object.assign(D.without(e,"mkey","children"),{headerLeft:me(function(){return V(e.mkey)}),render:function(){return e.children}})}})}var X;(function(e){function t(n){let{children:i,onPress:c}=n;return a.React.createElement(y,{variant:"text-md/bold",onPress:c},i)}e.Bold=t;function r(n){let{children:i,onPress:c}=n;return a.React.createElement(F,{style:{textDecorationLine:"underline"},onPress:c},i)}e.Underline=r})(X||(X={}));function y(e){let{variant:t,lineClamp:r,color:n,align:i,style:c,onPress:d,getChildren:f,children:R,liveUpdate:l}=e;const[P,p]=a.React.useReducer(function(T){return~T},0);return a.React.useEffect(function(){if(!l)return;const T=new Date().setMilliseconds(1e3);let g,N;return N=setTimeout(function(){p(),g=setInterval(p,1e3)},T-Date.now()),function(){clearTimeout(N),clearInterval(g)}},[]),a.React.createElement(F,{style:[t?ue[t]:{},n?{color:G(k.semanticColors[n])}:{},i?{textAlign:i}:{},c??{}],numberOfLines:r,onPress:d},f?.()??R)}const Ee=s.findByStoreName("UnsyncedUserSettingsStore");function ke(e){const t=Ee.useAMOLEDTheme;if(t===3)return e.darker??e.dark;if(t===2)return e.amoled??e.dark;if(t===1)return e.light;if(t===0)return e.dark}function B(e){if(Array.isArray(e))return ke({dark:e[0],light:e[1],amoled:e[2],darker:e[3]});if(e.startsWith("SC_"))return k.semanticColors[e.slice(3)]?G(k.semanticColors[e.slice(3)]):"#ffffff";if(e.startsWith("RC_"))return k.rawColors[e.slice(3)]??"#ffffff";if(e.startsWith("#")&&e.length===4)return`#${e[1].repeat(2)}${e[2].repeat(2)}${e[3].repeat(2)}`;if(e.startsWith("#")&&e.length===7)return e}function Ce(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:255;const[r,n,i,c]=e.match(/#([A-F0-9]{2})([A-F0-9]{2})([A-F0-9]{2})/i);return(t&255)<<24|(parseInt(n,16)&255)<<16|(parseInt(i,16)&255)<<8|parseInt(c,16)&255}function H(e,t,r){const n=r??v.getAssetByID(t)?.name;if(n&&e.icons[n])return B(e.icons[n])}function W(e,t,r){if(typeof r.props.source=="number"){const n=H(e,r.props.source,t);n&&C(r.props,{tintColor:n})}return r.props.ignore=!0,r}function Y(e){if(e.unreadBadgeColor)return B(e.unreadBadgeColor)}const{View:I}=m.General,{MaskedBadge:Se}=s.findByProps("MaskedBadge"),Pe=a.stylesheet.createThemedStyleSheet({maskPins:{position:"absolute",right:-10,bottom:-10,backgroundColor:k.semanticColors.BACKGROUND_SECONDARY}}),K="https://cdn.discordapp.com/attachments/919655852724604978/1134434803228344360/inner_check.png";function _e(e,t,r){const n=v.getAssetByID(t)?.name;if(n){if(["ic_new_pins_light","ic_new_pins"].includes(n))return{replace:n.includes("light")?"icon-pins":"ic_pins",children:React.createElement(I,{style:{position:"absolute",right:0,bottom:0}},React.createElement(Se,{maskStyle:Pe.maskPins,value:1,hideCount:!0}))};if(["ic_selection_checked_24px","ic_radio_square_checked_24px","ic_check","ic_radio_circle_checked"].includes(n))return{style:{tintColor:"#5865F2"},children:React.createElement(I,{style:{position:"absolute",left:0,top:0}},W(e,`${n}__overlay`,React.createElement(a.ReactNative.Image,{source:{uri:K},style:[...r,{tintColor:"#FFF"}]})))};if(["app_installed_check","ic_radio_circle_checked_green"].includes(n))return{style:{tintColor:"#3BA55C"},children:React.createElement(I,{style:{position:"absolute",left:0,top:0}},W(e,`${n}__overlay`,React.createElement(a.ReactNative.Image,{source:{uri:K},style:[...r,{tintColor:"#FFF"}]})))}}}var q={iconpacks:{list:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/list.json",assets:"https://raw.githubusercontent.com/Gabe616/VendettaThemesPlus/main/iconpacks/assets/"}};const{View:be}=m.General,J=s.findByProps("MaskedBadge"),Be=s.findByProps("createBackgroundHighlight"),Ie=s.findByStoreName("UserStore"),A=new Array;async function Ae(){const e=new Array,t=le();u.patches.length=0;const r=await(await fetch(q.iconpacks.list)).json();if(!o.enabled)return function(){};const n=Ie.getCurrentUser();if(t?.version!==void 0){if(u.active=!0,t.icons||t.customOverlays||t.iconpack||h.iconpack?.url){t.icons&&u.patches.push(o.PatchType.Icons),t.customOverlays&&u.patches.push(o.PatchType.CustomIconOverlays),(t.iconpack||h.iconpack?.url)&&u.patches.push(o.PatchType.IconPack);const i=h.iconpack?.url?{id:"custom-iconpack",description:"A custom iconpack!",credits:{authors:[`${n.username} <${n.id}>`],source:"N/A"},suffix:h.iconpack.suffix,load:h.iconpack.url}:r.list.find(function(d){return d.id===t.iconpack});u.iconpack=i??null;const c=i&&(i.load?i.load.endsWith("/")?i.load:i.load+"/":`${q.iconpacks.assets}${i.id}/`);e.push(E.instead("render",a.ReactNative.Image,function(d,f){const R=d.slice(),[l]=R;if(!l.source||typeof l.source!="number"||l.ignore)return f(...R);let P=l.source;const p=v.getAssetByID(P),T=i&&!A.includes(p.name);let g;if(t.customOverlays&&!T&&(g=_e(t,P,l.style?Array.isArray(l.style)?l.style:[l.style]:[]),g&&(g.replace&&(l.source=v.getAssetIDByName(g.replace)),g.style&&C(l,g.style))),t.icons){const _=H(t,P);_&&C(l,{tintColor:_})}const[N,Oe]=a.React.useReducer(function(_){return~_},0);T&&(l.onError=function(){A.includes(p.name)||A.push(p.name),Oe()},l.source={uri:`${c}${[...p.httpServerLocation.split("/").slice(2),`${p.name}${i.suffix}.${p.type}`].join("/")}`},l.style=$(l.style),l.style.width??=p.width,l.style.height??=p.height);const ie=f(...R);return g?.children&&!T?a.React.createElement(be,null,ie,g.children):ie}))}t.unreadBadgeColor&&(u.patches.push(o.PatchType.UnreadBadgeColor),e.push(E.after("MaskedBadge",J,function(i,c){const d=c&&D.findInReactTree(c,function(f){return f?.type?.name==="Badge"});d&&e.push(E.after("type",d,function(f,R){return R?.props&&C(R.props,{backgroundColor:Y(t)})},!0))})),e.push(E.after("default",J,function(i,c){return c?.props&&C(c.props,{backgroundColor:Y(t)})}))),t.mentionLineColor&&(u.patches.push(o.PatchType.MentionLineColor),e.push(E.after("createBackgroundHighlight",Be,function(i,c){let[d]=i;const f=B(t.mentionLineColor);d?.message?.mentioned&&f&&(c.gutterColor=Ce(f,200))})))}else u.active=!1;return u.patches[0]&&O(),function(){O(),e.forEach(function(i){return i()})}}const{BadgableTabBar:we}=s.findByProps("BadgableTabBar"),{ScrollView:Le,View:Ne}=m.General,{FormInput:Q}=m.Forms;function Z(){const[e,t]=a.React.useState("iconpack");return h.iconpack??={url:null,suffix:""},ce.useProxy(h),a.React.createElement(Te,{mkey:"dev-modal",title:"Developer Modal"},a.React.createElement(Le,null,a.React.createElement(Ne,{style:{marginHorizontal:16,marginVertical:16}},a.React.createElement(we,{activeTab:e,onTabSelected:t,tabs:[{id:"iconpack",title:"Custom Iconpack"}]})),e==="iconpack"&&a.React.createElement(a.React.Fragment,null,a.React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL",style:{marginHorizontal:16}},"Uses a custom iconpack, regardless of the current theme's settings"),a.React.createElement(Q,{title:"Root URL (raw.githubusercontent.com)",value:h.iconpack.url??"",onChange:function(r){return h.iconpack.url=r.match(oe.HTTP_REGEX_MULTI)?.[0]??null}}),a.React.createElement(Q,{title:"Icon Suffix",value:h.iconpack.suffix,onChange:function(r){return h.iconpack.suffix=r}}),a.React.createElement(m.Button,{size:"small",color:"green",text:"Reload",onPress:function(){x.stopPlugin(M.plugin.id,!0),V("dev-modal"),x.startPlugin(M.plugin.id)},style:{marginHorizontal:16}}))))}const{showUserProfile:ee}=s.findByProps("showUserProfile"),{fetchProfile:te}=s.findByProps("fetchProfile"),w=s.findByStoreName("UserStore");function Ue(e){let{userId:t,color:r,loadUsername:n,children:i}=e;const[c,d]=a.React.useState(!1);return a.React.useEffect(function(){return!c&&n&&(w.getUser(t)?d(w.getUser(t).username):te(t).then(function(f){return d(f.user.username)}))},[n]),a.React.createElement(y,{variant:"text-md/bold",color:r??"TEXT_NORMAL",onPress:function(){return w.getUser(t)?ee({userId:t}):te(t).then(function(){return ee({userId:t})})}},n?`@${c??"..."}`:i)}const{FormRow:De}=m.Forms,ne=function(e){const t=e.split(" <");return t[1]?[t[0],t[1].slice(0,-1)]:[t[0]]};function xe(e){const{iconpack:t}=u,r=[];if(t)for(let n=0;n<t.credits.authors.length;n++){const i=ne(t.credits.authors[n]);i[1]?r.push(React.createElement(Ue,{userId:i[1],loadUsername:!1,color:"TEXT_LINK"},i[0])):r.push(i[0]),n!==t.credits.authors.length-1&&r.push(", ")}return React.createElement(j,null,React.createElement(ge,null,t?React.createElement(React.Fragment,null,React.createElement(fe,{title:t.id,trailing:React.createElement(pe,{onPress:function(){return he()}})}),[["Description",[t.description]],["Authors",r,t.credits.authors.map(function(n){return ne(n)[0]}).join(", ")],["Description",[t.description]],["Source",[t.credits.source]],["Icon Suffix",[t.suffix??"N/A"]],["Load URL",[t.load??"N/A"]]].map(function(n){let[i,c,d]=n;return React.createElement(De,{label:c,subLabel:i,onLongPress:function(){a.clipboard.setString(d??c.join("")),U.showToast("Copied",v.getAssetIDByName("toast_copy_link"))}})})):React.createElement(y,{variant:"text-md/semibold",color:"TEXT_NORMAL"},"womp womp")))}const{View:S}=m.General,ae="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/",{TextStyleSheet:L}=s.findByProps("TextStyleSheet");function Me(){let e=0;return React.createElement(S,{style:{flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"}},u.active?React.createElement(React.Fragment,null,React.createElement(S,{style:{flexDirection:"row",justifyContent:"center",marginBottom:16}},React.createElement(a.ReactNative.Image,{source:{uri:`${ae}2705.png`},style:{height:L["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(y,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL",onPress:function(){return e>=Date.now()?z("dev-modal",Z):e=Date.now()+500}},"Themes+ is Active")),React.createElement(S,{style:{flexDirection:"column",marginHorizontal:16}},[[o.PatchType.Icons,["Custom icon colors"]],[o.PatchType.UnreadBadgeColor,["Unread badge color"]],[o.PatchType.CustomIconOverlays,["Custom icon overlays"]],[o.PatchType.MentionLineColor,["Mention line color"]],[o.PatchType.IconPack,u.iconpack?[React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",onPress:function(){return ve(xe,{})}},"Custom icon pack")]:["Custom icon pack"]]].map(function(t){let[r,n]=t;return React.createElement(S,{style:{flexDirection:"row"}},React.createElement(a.ReactNative.Image,{source:v.getAssetIDByName(u.patches.includes(r)?"ic_radio_square_checked_24px":"ic_radio_square_24px"),style:{marginRight:8,height:L["text-lg/semibold"].fontSize,aspectRatio:1/1,marginTop:4}}),React.createElement(y,{variant:"text-lg/semibold",color:"TEXT_NORMAL"},n))}))):React.createElement(S,{style:{flexDirection:"row",justifyContent:"center"}},React.createElement(a.ReactNative.Image,{source:{uri:`${ae}274c.png`},style:{height:L["heading-xxl/semibold"].fontSize,aspectRatio:1/1,marginRight:8,marginTop:6}}),React.createElement(y,{variant:"heading-xxl/semibold",color:"TEXT_NORMAL",onPress:function(){return e>=Date.now()?z("dev-modal",Z):e=Date.now()+500}},"Themes+ is not Active")),React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:32},onPress:function(){return a.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#info")}},"Why is Themes+ inactive?"),React.createElement(y,{variant:"text-lg/bold",color:"TEXT_LINK",style:{textDecorationLine:"underline",marginTop:4},onPress:function(){return a.url.openURL("https://github.com/Gabe616/VendettaThemesPlus#using-vendetta-themes")}},"How to use Themes+?"))}o.PatchType=void 0,function(e){e[e.Icons=0]="Icons",e[e.UnreadBadgeColor=1]="UnreadBadgeColor",e[e.CustomIconOverlays=2]="CustomIconOverlays",e[e.MentionLineColor=3]="MentionLineColor",e[e.IconPack=4]="IconPack"}(o.PatchType||(o.PatchType={}));let u={active:!1,iconpack:null,patches:[]};const h=se.storage;o.enabled=!1;let re;var $e={onLoad:async function(){o.enabled=!0,re=await Ae()},onUnload:function(){o.enabled=!1,re?.()},settings:Me};return o.active=u,o.default=$e,o.vstorage=h,Object.defineProperty(o,"__esModule",{value:!0}),o})({},vendetta.metro.common,vendetta.patcher,vendetta.ui.assets,vendetta.metro,vendetta.ui,vendetta.ui.components,vendetta.ui.toasts,vendetta.utils,vendetta.storage,vendetta.constants,vendetta.plugins,vendetta,vendetta.plugin);
