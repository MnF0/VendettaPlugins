(function(h,be,G,l,A,C,_,R,c,U,n,g,E,z,me,Ce,Te){"use strict";const Ie=l.findByStoreName("ThemeStore"),Pe=l.findByProps("colors","meta"),{TextStyleSheet:Ne}=l.findByProps("TextStyleSheet"),{View:P,Text:H,Pressable:Ae}=g.General,{FormRow:Be}=g.Forms,q=l.find(function(e){return e.render?.name==="ActionSheet"}),{openLazy:De,hideActionSheet:Z}=l.findByProps("openLazy","hideActionSheet"),{ActionSheetTitleHeader:_e,ActionSheetCloseButton:Oe,ActionSheetContentContainer:$e}=l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer");l.findByName("Navigator"),l.findByProps("getRenderCloseButton"),l.findByProps("popModal","pushModal");function xe(e){return Pe.meta.resolveSemanticColor(Ie.theme,e)}function ee(e,t){q?De(new Promise(function(i){return i({default:e})}),"ActionSheet",t):R.showToast("You cannot open ActionSheets on this version! Update to 163+",c.getAssetIDByName("Small"))}function Me(e){let{title:t,onPress:i,icon:r}=e;const o=n.stylesheet.createThemedStyleSheet({androidRipple:{color:E.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:n.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:E.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:E.semanticColors.HEADER_SECONDARY}}),a=i?Ae:P;return n.React.createElement(a,{android_ripple:o.androidRipple,disabled:!1,accessibilityRole:"button",onPress:i,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},r&&n.React.createElement(P,{style:{marginRight:4}},n.React.createElement(Be.Icon,{style:o.icon,source:r,size:"small"})),n.React.createElement(H,{style:o.mainText},t))}function j(e){let{title:t,onTitlePress:i,icon:r,children:o,padding:a}=e;const u=n.stylesheet.createThemedStyleSheet({main:{backgroundColor:E.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return n.React.createElement(P,{style:{marginHorizontal:16,marginTop:16}},n.React.createElement(Me,{title:t,onPress:i,icon:r}),n.React.createElement(P,{style:u.main},a?n.React.createElement(P,{style:{paddingHorizontal:16,paddingVertical:16}},o):o))}function Le(e){let{addPadding:t}=e;const i=n.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:E.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return n.React.createElement(P,{style:[{marginTop:16,marginBottom:16},t&&{marginHorizontal:16}]},n.React.createElement(P,{style:i.line}))}var te;(function(e){function t(r){let{children:o,onPress:a}=r;return n.React.createElement(ne,{variant:"text-md/bold",onPress:a},o)}e.Bold=t;function i(r){let{children:o,onPress:a}=r;return n.React.createElement(H,{style:{textDecorationLine:"underline"},onPress:a},o)}e.Underline=i})(te||(te={}));function ne(e){let{variant:t,lineClamp:i,color:r,align:o,style:a,onPress:u,getChildren:y,children:d,liveUpdate:b}=e;const[m,v]=n.React.useReducer(function(S){return~S},0);return n.React.useEffect(function(){if(!b)return;const S=new Date().setMilliseconds(1e3);let w,I;return I=setTimeout(function(){v(),w=setInterval(v,1e3)},S-Date.now()),function(){clearTimeout(I),clearInterval(w)}},[]),n.React.createElement(H,{style:[t?Ne[t]:{},r?{color:xe(E.semanticColors[r])}:{},o?{textAlign:o}:{},a??{}],numberOfLines:i,onPress:u},y?.()??d)}function ie(e){let{onPress:t,icon:i,style:r,destructive:o}=e;const a=n.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:E.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:E.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:E.semanticColors.TEXT_DANGER}});return n.React.createElement(n.ReactNative.TouchableOpacity,{onPress:t},n.React.createElement(n.ReactNative.Image,{style:[typeof r=="string"?r==="header"?a.headerStyleIcon:a.cardStyleIcon:r,o&&a.destructiveIcon].filter(function(u){return!!u}),source:i}))}const{View:Ue,Text:re}=g.General,{TextStyleSheet:ae}=l.findByProps("TextStyleSheet"),oe=n.stylesheet.createThemedStyleSheet({count:{...ae["text-lg/bold"],color:E.semanticColors.TEXT_NORMAL,textAlign:"center"},subtitle:{...ae["text-md/medium"],color:E.semanticColors.TEXT_MUTED,textAlign:"center"}});function ce(e){let{subtitle:t,count:i,contents:r}=e;return React.createElement(Ue,{style:{alignItems:"center",justifyContent:"center",marginHorizontal:16}},React.createElement(re,{style:oe.count},i),React.createElement(re,{style:oe.subtitle},t))}const se="https://cloudsync.nexpid.xyz/";var N={api:se,oauth2:{clientId:"1120793656878714913",redirectURL:`${se}api/oauth2-response`}};function je(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t,i){return le()?k=Reflect.construct:k=function(r,o,a){var u=[null];u.push.apply(u,o);var y=Function.bind.apply(r,u),d=new y;return a&&$(d,a.prototype),d},k.apply(null,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(e)}function Fe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function Ve(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Ge(e,t){return t&&(ze(t)==="object"||typeof t=="function")?t:je(e)}function $(e,t){return $=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},$(e,t)}function ze(e){"@swc/helpers - typeof";return e&&typeof Symbol<"u"&&e.constructor===Symbol?"symbol":typeof e}function Y(e){var t=typeof Map=="function"?new Map:void 0;return Y=function(i){if(i===null||!Ve(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(i))return t.get(i);t.set(i,r)}function r(){return k(i,arguments,O(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$(r,i)},Y(e)}function le(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function He(e){var t=le();return function(){var i=O(e),r;if(t){var o=O(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return Ge(this,r)}}const ue=l.findByStoreName("UserStore");let x=function(e){Fe(i,e);var t=He(i);function i(r){ke(this,i);var o;return o=t.call(this,`${r.status}: ${r.message}${r.error?` (${r.error})`:""}`),o.name=o.constructor.name,o}return i}(Y(Error));function T(){return s.auth?.[ue.getCurrentUser().id]}async function J(){const e=new Error("Unauthorized, try logging out and back in again");let t=T();if(!t)throw e;if(Date.now()>=t.expiresAt){const i=await fetch(`${N.api}api/refresh-access-token?refresh_token=${encodeURIComponent(t.refreshToken)}`);if(i.status!==200)throw new x(await i.json());t=await i.json(),s.auth??={},s.auth[ue.getCurrentUser().id]=t}return t.accessToken}async function Ye(e){const t=await fetch(`${N.api}api/get-access-token?code=${encodeURIComponent(e)}`);if(t.status===200)return await t.json();throw new x(await t.json())}async function Je(){if(!T())return;const e=await fetch(`${N.api}api/get-data`,{headers:{authorization:await J()}});if(e.status===200)return await e.json();throw new x(await e.json())}async function de(e){if(!T())return;const t=await fetch(`${N.api}api/sync-data`,{method:"POST",headers:{authorization:await J(),"content-type":"application/json"},body:JSON.stringify(e)});if(t.status===200)return await t.json();throw new x(await t.json())}async function Xe(){if(!T())return;const e=await fetch(`${N.api}api/delete-data`,{method:"DELETE",headers:{authorization:await J()}});if(e.status===200)return await e.json();throw new x(await e.json())}const{pushModal:Ke,popModal:We}=l.findByProps("pushModal","popModal"),Qe=l.findByName("OAuth2AuthorizeModal"),qe=l.findByStoreName("UserStore");function Ze(){Ke({key:"oauth2-authorize",modal:{key:"oauth2-authorize",modal:Qe,animation:"slide-up",shouldPersistUnderModals:!1,props:{clientId:N.oauth2.clientId,redirectUri:N.oauth2.redirectURL,scopes:["identify"],responseType:"code",permissions:0n,cancelCompletesFlow:!1,callback:async function(e){let{location:t}=e;try{const i=new URL(t).searchParams.get("code"),r=await Ye(i);s.auth??={},s.auth[qe.getCurrentUser().id]=r,Q(),R.showToast("Successfully authenticated",c.getAssetIDByName("Check"))}catch(i){R.showToast(String(i),c.getAssetIDByName("Small"))}},dismissOAuthModal:function(){return We("oauth2-authorize")}},closable:!0}})}const{BundleUpdaterManager:Tt,MMKVManager:et}=window.nativeModuleProxy;async function fe(){const e={themes:[],plugins:[]};for(const t of Object.values(C.plugins)){const i=s.pluginSettings?.[t.id];if(i?.syncPlugin===!1)continue;const r=i?.syncStorage===!1?{}:await G.createMMKVBackend(t.id).get();e.plugins.push({id:t.id,enabled:t.enabled,options:r})}for(const t of Object.values(_.themes))e.themes.push({id:t.id,enabled:t.selected});return e}let F;function tt(e){F=e}async function nt(e){if(!f.save)return;F?.(!0);const t=[...f.save.sync.plugins.filter(function(r){return!C.plugins[r.id]&&!M(r.id)&&e.unproxiedPlugins}),...f.save.sync.plugins.filter(function(r){return!C.plugins[r.id]&&M(r.id)&&e.plugins})],i=f.save.sync.themes.filter(function(r){return!_.themes[r.id]&&e.themes});if(!t[0]&&!i[0])return F?.(!1),R.showToast("Nothing to import",c.getAssetIDByName("Small"));R.showToast(`Importing ${[t.length&&`${t.length} plugin${t.length!==1?"s":""}`,i.length&&`${i.length} theme${i.length!==1?"s":""}`].filter(function(r){return!!r}).join(" and ")}`,c.getAssetIDByName("toast_image_saved")),await Promise.all([async function(){for(const r of t)et.setItem(r.id,JSON.stringify(r.options)),await C.installPlugin(r.id,r.enabled)}(),async function(){for(const r of i)await _.installTheme(r.id)}()]),R.showToast(`Imported ${[t.length&&"plugins",i.length&&"themes"].filter(function(r){return!!r}).join("&")}!`,c.getAssetIDByName("check")),F?.(!1)}const{FormCheckboxRow:X}=g.Forms;function ge(e){let{defOptions:t}=e;const i={unproxiedPlugins:f.save.sync.plugins.filter(function(a){return!C.plugins[a.id]&&!M(a.id)}).length,plugins:f.save.sync.plugins.filter(function(a){return!C.plugins[a.id]&&M(a.id)}).length,themes:f.save.sync.themes.filter(function(a){return!_.themes[a.id]}).length},[r,o]=n.React.useState(t??{unproxiedPlugins:!1,plugins:!!i.plugins,themes:!!i.themes});return n.React.createElement(q,null,n.React.createElement($e,null,n.React.createElement(_e,{title:"Import Data",trailing:n.React.createElement(Oe,{onPress:function(){return Z()}})}),n.React.createElement(X,{label:`Unproxied Plugins (${i.unproxiedPlugins})`,disabled:!i.unproxiedPlugins,onPress:function(){return i.unproxiedPlugins&&(!r.unproxiedPlugins&&!t?U.showConfirmationAlert({title:"Warning",content:"Installing unproxied plugins can be dangerous since they haven't been verified by Vendetta staff. Are you sure you want to import them?",isDismissable:!0,confirmText:"Yes",confirmColor:"brand",onConfirm:function(){return ee(ge,{defOptions:{...r,unproxiedPlugins:!0}})},cancelText:"Cancel"}):o({...r,unproxiedPlugins:!r.unproxiedPlugins}))},selected:r.unproxiedPlugins}),n.React.createElement(X,{label:`Plugins (${i.plugins})`,disabled:!i.plugins,onPress:function(){return i.plugins&&o({...r,plugins:!r.plugins})},selected:r.plugins}),n.React.createElement(X,{label:`Themes (${i.themes})`,disabled:!i.themes,onPress:function(){return i.themes&&o({...r,themes:!r.themes})},selected:r.themes}),n.React.createElement(g.Button,{text:"Import",color:"green",size:"medium",renderIcon:function(){return n.React.createElement(n.ReactNative.Image,{style:{marginRight:8},source:c.getAssetIDByName("ic_download_24px")})},onPress:function(){nt(r),Z()},style:{marginHorizontal:16,marginVertical:16},disabled:!r.unproxiedPlugins&&!r.plugins&&!r.themes})))}const he=l.findByProps("isTablet"),{View:it}=g.General,{FormRow:rt}=g.Forms;function at(){const[e,t]=n.React.useState({});return T()?n.React.createElement(it,{style:{flexDirection:he.isTablet?"row":"column",justifyContent:"flex-end"}},[{text:"Save Data",onPress:async function(i){i(!0);try{f.save=await de(await fe()),D(),R.showToast("Successfully synced data",c.getAssetIDByName("Check"))}catch(r){R.showToast(String(r),c.getAssetIDByName("Small"))}i(!1)}},{text:"Import Data",onPress:function(i){f.save&&(ee(ge,{}),tt(i))}}].map(function(i,r){const o=r!==0?8:0;return n.React.createElement(g.Button,{text:i.text,color:"green",size:"small",onPress:function(){return!e[r]&&i.onPress(function(a){t({...e,[r]:!!a})})},trailing:n.React.createElement(rt.Icon,{source:c.getAssetIDByName("Check")}),loading:e[r],style:[he.isTablet?{marginLeft:o}:{marginTop:o}]})})):n.React.createElement(ne,{variant:"text-md/semibold",color:"TEXT_NORMAL",align:"center"},"Authenticate first to manage your data")}const{FormSwitchRow:ye}=g.Forms;function ot(){const[e,t]=n.React.useState(""),[,i]=n.React.useReducer(function(a){return~a},0);n.React.useEffect(function(){t("")},[]),G.useProxy(s);const r=n.NavigationNative.useNavigation(),o=r.addListener("focus",function(){o(),r.setOptions({title:"Plugin Settings",headerRight:function(){return n.React.createElement(ie,{onPress:function(){return U.showConfirmationAlert({title:"Revert Settings",content:"Are you sure you want to revert all plugin settings?",confirmText:"Revert",cancelText:"Cancel",confirmColor:"red",onConfirm:function(){return s.pluginSettings={}}})},icon:c.getAssetIDByName("ic_message_delete"),style:"header"})}})});return n.React.createElement(n.ReactNative.FlatList,{ListHeaderComponent:n.React.createElement(g.Search,{style:{marginBottom:10},onChangeText:function(a){return t(a.toLowerCase())}}),style:{paddingHorizontal:10,paddingTop:10},contentContainerStyle:{paddingBottom:20},data:Object.entries(C.plugins).filter(function(a){return a[1].manifest.name?.toLowerCase().includes(e)}),renderItem:function(a){let{item:[u,y]}=a;s.pluginSettings??={};const d=s.pluginSettings[u]??{syncPlugin:!0,syncStorage:!0},b=function(){s.pluginSettings??={},d.syncPlugin===!0&&d.syncStorage===!0?delete s.pluginSettings[u]:s.pluginSettings[u]=d,i()};return n.React.createElement(g.Summary,{label:y.manifest.name,icon:y.manifest.vendetta.icon??":3"},n.React.createElement(ye,{label:"Sync Plugin",onValueChange:function(){d.syncPlugin=!d.syncPlugin,b()},value:d.syncPlugin}),n.React.createElement(ye,{label:"Sync Plugin Storage",onValueChange:function(){d.syncStorage=!d.syncStorage,b()},value:d.syncStorage}))}})}var pe={github:{url:"https://github.com/Gabe616/VendettaPlugins/"}};const{showSimpleActionSheet:ct}=l.findByProps("showSimpleActionSheet"),st=l.findByStoreName("UserStore");function lt(){const e=Te.getDebugInfo(),t=n.ReactNative.NativeModules.InfoDictionaryManager??n.ReactNative.NativeModules.RTNClientInfoManager;return`Device: ${e.os.name==="iOS"?e.device.codename:`${e.device.brand} ${e.device.model}`}
Model: ${e.device.model}
Manufacturer: ${e.device.manufacturer}
Brand: ${e.device.brand}

OS: ${e.os.name}
Version: ${e.os.version}

Discord Branch: ${t.ReleaseChannel}
Discord Version: ${e.discord.version}
Discord Build: ${e.discord.build}
Vendetta Version: ${e.vendetta.version}

React Version: ${e.react.version}
Hermes Bytecode: ${e.hermes.bytecodeVersion}`}function Re(e){const t=st.getCurrentUser(),i=new URLSearchParams;for(const[r,o]of Object.entries(e))i.set(r,o);return i.set("discord-username",`@${t.username}${t.discriminator!=="0"?`#${t.discriminator}`:""}`),console.log(`${pe.github.url}issues/new?${i.toString()}`),`${pe.github.url}issues/new?${i.toString()}`}const ut=function(e){return ct({key:"CardOverflow",header:{title:"GitHub Reports"},options:[{label:"Copy bug report link",icon:c.getAssetIDByName("copy"),onPress:function(){n.clipboard.setString(Re({title:`bug(${e}): `,template:"bug_report.yml",labels:"bug",sysinfo:lt()})),R.showToast("Copied",c.getAssetIDByName("toast_copy_link"))}},{label:"Copy feature suggestion link",icon:c.getAssetIDByName("copy"),onPress:function(){n.clipboard.setString(Re({title:`suggest(${e}): `,labels:"suggestion",template:"suggestion.yml"})),R.showToast("Copied",c.getAssetIDByName("toast_copy_link"))}}]})},{ScrollView:dt,View:ft}=g.General,{FormRow:p,FormSwitchRow:Se}=g.Forms,Ee=l.findByStoreName("UserStore");function K(){const[,e]=n.React.useReducer(function(r){return~r},0);G.useProxy(s),h.cacheUpd.push(e),n.React.useEffect(function(){return function(){h.cacheUpd=h.cacheUpd.filter(function(r){return r!==e})}},[]);const t=n.NavigationNative.useNavigation(),i=t.addListener("focus",function(){i(),t.setOptions({headerRight:function(){return n.React.createElement(ie,{icon:c.getAssetIDByName("ic_report_message"),style:"header",onPress:function(){return ut("cloud-sync")}})}})});return n.React.createElement(dt,null,n.React.createElement(j,{title:"Current Data",icon:c.getAssetIDByName("ic_contact_sync"),padding:!0},n.React.createElement(ft,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginVertical:8}},n.React.createElement(ce,{count:f.save?.sync?.plugins?.length??"-",subtitle:"plugins",contents:2}),n.React.createElement(ce,{count:f.save?.sync?.themes?.length??"-",subtitle:"themes",contents:2}))),n.React.createElement(j,{title:"Settings",icon:c.getAssetIDByName("ic_cog_24px")},n.React.createElement(Se,{label:"Auto Save",subLabel:"Automatically save data to cloud",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("ic_contact_sync")}),onValueChange:function(){return s.autoSync=!s.autoSync},value:s.autoSync??!1}),n.React.createElement(Se,{label:"Pin To Settings",subLabel:"Pin Cloud Sync to the settings page",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("ic_message_pin")}),onValueChange:function(){return s.addToSettings=!s.addToSettings},value:s.addToSettings??!1}),n.React.createElement(p,{label:"Plugin Settings",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("debug")}),trailing:n.React.createElement(p.Arrow,null),onPress:function(){return t.push("VendettaCustomPage",{render:ot})}})),n.React.createElement(j,{title:"Authentication",icon:c.getAssetIDByName("lock")},T()?n.React.createElement(n.React.Fragment,null,n.React.createElement(p,{label:"Log out",subLabel:"Logs you out of CloudSync",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("ic_logout_24px")}),onPress:function(){s.auth??={},delete s.auth[Ee.getCurrentUser().id],delete f.save,D(),R.showToast("Successfully logged out",c.getAssetIDByName("ic_logout_24px"))}}),n.React.createElement(p,{label:"Delete data",subLabel:"Deletes your CloudSync data",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("trash")}),onPress:async function(){await Xe(),s.auth??={},delete s.auth[Ee.getCurrentUser().id],delete f.save,D(),R.showToast("Successfully deleted data",c.getAssetIDByName("trash"))}})):n.React.createElement(p,{label:"Authenticate",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("copy")}),trailing:p.Arrow,onPress:Ze})),n.React.createElement(j,{title:"Data Management",icon:c.getAssetIDByName("ic_message_edit"),padding:!0},n.React.createElement(at,null),T()&&n.React.createElement(n.React.Fragment,null,n.React.createElement(Le,null),n.React.createElement(p,{label:"Copy Data as JSON",leading:n.React.createElement(p.Icon,{source:c.getAssetIDByName("copy")}),onPress:function(){n.clipboard.setString(JSON.stringify(f.save??{},void 0,3)),R.showToast("Copied",c.getAssetIDByName("Check"))}}))))}let ve=0;function gt(e){clearTimeout(ve),ve=setTimeout(e,1500)}const{FormRow:W}=g.Forms;function ht(){const e=n.NavigationNative.useNavigation();return React.createElement(g.ErrorBoundary,null,React.createElement(W,{label:"Cloud Sync",leading:React.createElement(W.Icon,{source:c.getAssetIDByName("ic_contact_sync")}),trailing:W.Arrow,onPress:function(){return e.push("VendettaCustomPage",{title:"CloudSync",render:K})}}))}const{FormSection:yt}=g.Forms,pt=l.findByName("getScreens"),Rt=l.findByName("UserSettingsOverviewWrapper",!1),St=l.findByName("SettingsOverviewScreen",!1),B=l.findByProps("SETTING_RELATIONSHIPS","SETTING_RENDERER_CONFIGS"),Et=l.findByProps("getSettingTitleConfig"),vt=n.stylesheet.createThemedStyleSheet({container:{flex:1,backgroundColor:E.semanticColors.BACKGROUND_MOBILE_PRIMARY}});function wt(e,t,i){const r=[],o=A.after("default",Rt,function(a,u){o();const y=z.findInReactTree(u.props.children,function(d){return d.type&&d.type.name==="UserSettingsOverview"});r.push(A.after("render",y.type.prototype,function(d,b){let{props:{children:m}}=b;const v=[n.i18n.Messages.BILLING_SETTINGS,n.i18n.Messages.PREMIUM_SETTINGS];m=z.findInReactTree(m,function(w){return w.children[1].type===yt}).children;const S=m.findIndex(function(w){return v.includes(w?.props.label)});e()&&m.splice(S===-1?4:S,0,t())}))},!0);if(r.push(o),pt&&i){const a=`VENDETTA_PLUGIN_${n.lodash.snakeCase(i.key).toUpperCase()}`;r.push(A.after("default",St,function(m,v){const S=v.props.sections,w=S.findIndex(function(I){return I.title==="Vendetta"});if(S[w]&&e()){const I={...S[w]};I.settings=[...I.settings,a],S[w]=I}})),r.push(A.after("getSettingTitleConfig",Et,function(m,v){return{...v,...Object.fromEntries([[a,typeof i.title=="function"?i.title():i.title]])}}));const u=i.page.render,y=n.React.memo(function(m){let{navigation:v}=m;const S=v.addListener("focus",function(){S(),v.setOptions(z.without(i.page,"noErrorBoundary","render"))});return n.React.createElement(n.ReactNative.View,{style:vt.container},i.page.noErrorBoundary?n.React.createElement(u,null):n.React.createElement(g.ErrorBoundary,null,n.React.createElement(u,null)))}),d=B.SETTING_RELATIONSHIPS;B.SETTING_RELATIONSHIPS={...d,...Object.fromEntries([[a,null]])};const b=B.SETTING_RENDERER_CONFIGS;B.SETTING_RENDERER_CONFIGS={...b,...Object.fromEntries([[a,{type:"route",icon:i.icon,screen:{route:`VendettaPlugin${n.lodash.chain(i.key).camelCase().upperFirst().value()}`,getComponent:function(){return y}}}]])},r.push(function(){B.SETTING_RELATIONSHIPS=d,B.SETTING_RENDERER_CONFIGS=b})}return function(){return r.forEach(function(a){return a()})}}function bt(){let e=[];return e.push(wt(function(){return s.addToSettings},function(){return React.createElement(ht,null)},{key:me.plugin.manifest.name,icon:c.getAssetIDByName("ic_contact_sync"),title:"Cloud Sync",page:{title:"CloudSync",render:K}})),function(){return e.forEach(function(t){return t()})}}const s=be.storage,f={};h.cacheUpd=[];function D(){h.cacheUpd.forEach(function(e){return e()})}async function Q(){try{f.save=await Je()}catch{}D()}async function mt(e,t,i,r,o,a,u){return e?new Promise(function(y){U.showConfirmationAlert({title:t,content:i,confirmText:r,cancelText:o,confirmColor:"green",isDismissable:!1,onConfirm:function(){return a?a().then(y):y()},onCancel:function(){return u?u().then(y):y()}})}):await a?.()}function M(e){return e.startsWith(Ce.PROXY_PREFIX)}const we=async function(){if(!s.autoSync)return;const e=await fe();JSON.stringify(f.save)!==JSON.stringify(e)&&gt(async function(){f.save=await de(e),D()})};let V=[];const L=2;var Ct={onLoad:function(){T()&&Q(),["installPlugin","startPlugin","stopPlugin","removePlugin"].forEach(function(t){return V.push(A.before(t,C,function(){we()}))}),["installTheme","selectTheme","removeTheme"].forEach(function(t){return V.push(A.before(t,_,function(){we()}))}),V.push(bt());const e=function(t,i){return U.showConfirmationAlert({title:t,content:i,onConfirm:function(){},confirmText:"Dismiss",confirmColor:"brand",secondaryConfirmText:"Don't show again",onConfirmSecondary:function(){return s.databaseMigrate=L}})};s.databaseMigrate!==L&&window.CSmigrationStage!==L&&(window.CSmigrationStage=L,e("Cloud Sync \u2014 DB Migration Stage 2",`CloudSync has officially switched to an SQLite database! (Cloudflare's D1) Make sure to sync your data again in case any was lost while migrating.

- nexx`))},onUnload:function(){return V.forEach(function(e){return e()})},settings:K};return h.cache=f,h.cacheUpdated=D,h.currentMigrationStage=L,h.default=Ct,h.fillCache=Q,h.isPluginProxied=M,h.promptOrRun=mt,h.vstorage=s,Object.defineProperty(h,"__esModule",{value:!0}),h})({},vendetta.plugin,vendetta.storage,vendetta.metro,vendetta.patcher,vendetta.plugins,vendetta.themes,vendetta.ui.toasts,vendetta.ui.assets,vendetta.ui.alerts,vendetta.metro.common,vendetta.ui.components,vendetta.ui,vendetta.utils,vendetta,vendetta.constants,vendetta.debug);
