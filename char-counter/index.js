(function(E,z,l,b,P,e,y,H,F,u,x){"use strict";const G=l.findByStoreName("UserStore");function B(n){return o.commas?n.toString().split("").reverse().map(function(a,i,r){return i%3===0&&r.length>3&&i!==0?`${a},`:a}).reverse().join(""):n.toString()}function U(){return!!(o.supportSLM&&Object.values(H.plugins).find(function(n){return n.manifest.name==="SplitLargeMessages"})?.enabled)}function $(){return G.getCurrentUser()?.premiumType===2?4e3:2e3}const{Animated:I}=e.ReactNative;function D(n){let{duration:a,children:i,style:r,fade:t,trigger:s,customOpacity:c,setDisplay:R,animateOnInit:p}=n;p??=!0;const h=e.React.useRef(!0),f=e.React.useRef(!0),d=e.React.useRef(new I.Value(p&&t==="in"?1:0)).current;return e.React.useEffect(function(){if(!p&&h.current){h.current=!1;return}!p&&f.current&&(d.setValue(t==="in"?0:1),f.current=!1),I.timing(d,{toValue:c??(t==="in"?1:0),duration:a,useNativeDriver:!0}).start()},[d,t,c,s]),e.React.createElement(I.View,{style:[{opacity:d},R&&d._value===0&&{display:"none"},r]},i)}const Y=l.findByStoreName("ThemeStore"),j=l.findByProps("colors","meta"),{TextStyleSheet:X}=l.findByProps("TextStyleSheet"),{View:m,Text:N,Pressable:k}=y.General,{FormRow:K}=y.Forms;l.find(function(n){return n.render?.name==="ActionSheet"}),l.findByProps("openLazy","hideActionSheet"),l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),l.findByName("Navigator"),l.findByProps("getRenderCloseButton"),l.findByProps("popModal","pushModal");function W(n){return j.meta.resolveSemanticColor(Y.theme,n)}function J(n){let{title:a,onPress:i,icon:r}=n;const t=e.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:u.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:u.semanticColors.HEADER_SECONDARY}}),s=i?k:m;return e.React.createElement(s,{android_ripple:t.androidRipple,disabled:!1,accessibilityRole:"button",onPress:i,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},r&&e.React.createElement(m,{style:{marginRight:4}},e.React.createElement(K.Icon,{style:t.icon,source:r,size:"small"})),e.React.createElement(N,{style:t.mainText},a))}function q(n){let{title:a,onTitlePress:i,icon:r,children:t,padding:s}=n;const c=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(m,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(J,{title:a,onPress:i,icon:r}),e.React.createElement(m,{style:c.main},s?e.React.createElement(m,{style:{paddingHorizontal:16,paddingVertical:16}},t):t))}var M;(function(n){function a(r){let{children:t,onPress:s}=r;return e.React.createElement(_,{variant:"text-md/bold",onPress:s},t)}n.Bold=a;function i(r){let{children:t,onPress:s}=r;return e.React.createElement(N,{style:{textDecorationLine:"underline"},onPress:s},t)}n.Underline=i})(M||(M={}));function _(n){let{variant:a,lineClamp:i,color:r,align:t,style:s,onPress:c,getChildren:R,children:p,liveUpdate:h}=n;const[f,d]=e.React.useReducer(function(g){return~g},0);return e.React.useEffect(function(){if(!h)return;const g=new Date().setMilliseconds(1e3);let A,V;return V=setTimeout(function(){d(),A=setInterval(d,1e3)},g-Date.now()),function(){clearTimeout(V),clearInterval(A)}},[]),e.React.createElement(N,{style:[a?X[a]:{},r?{color:W(u.semanticColors[r])}:{},t?{textAlign:t}:{},s??{}],numberOfLines:i,onPress:c},R?.()??p)}const{Text:le,View:Q,Pressable:Z}=y.General,{TextStyleSheet:w}=l.findByProps("TextStyleSheet"),T=w["text-xs/semibold"].fontSize,S=e.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,marginRight:8,marginTop:-12},text:{...w["text-xs/semibold"],textAlign:"right",paddingHorizontal:8,paddingVertical:8},extraMessagesCircle:{backgroundColor:u.semanticColors.REDESIGN_BUTTON_PRIMARY_BACKGROUND,borderRadius:2147483647,position:"absolute",left:0,top:0,transform:[{translateX:-T},{translateY:-T}],minWidth:T*2,height:T*2,justifyContent:"center",alignItems:"center",zIndex:2},normal:{color:u.semanticColors.TEXT_NORMAL},jinkies:{color:u.semanticColors.TEXT_DANGER}});function ee(n){let{inputProps:a}=n;const[i,r]=e.React.useState(!1),t=e.React.useRef(null);a.onChangeText?b.after("onChangeText",a,function(g){let[A]=g;return t.current=A},!0):a.onChangeText=function(g){return t.current=g};const s=t.current?.length??0,c=$(),R=U()?Math.floor(s/c):0,p=s-R*c,h=S.text.fontSize*2+S.text.paddingVertical,f=s>=(o.minChars??1),d=f?Z:Q;return e.React.createElement(D,{duration:100,style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-h,zIndex:1},fade:f?"in":"out",customOpacity:i&&f?.3:void 0},e.React.createElement(d,{android_ripple:S.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Character counter",accessibilityHint:"Tap to toggle character counter translucency",style:S.container,onPress:f?function(){return r(!i)}:void 0},e.React.createElement(D,{fade:R>0&&f?"in":"out",duration:100,style:S.extraMessagesCircle},e.React.createElement(_,{variant:"text-xs/semibold",color:"TEXT_NORMAL",style:{paddingHorizontal:T/2}},R)),e.React.createElement(_,{variant:"text-xs/semibold",color:p<=c?"TEXT_NORMAL":"TEXT_DANGER",style:{paddingHorizontal:8,paddingVertical:8}},B(p),"/",B(c))))}const{ChatInput:te}=l.findByProps("ChatInput"),{MessagesWrapper:ne}=l.findByProps("MessagesWrapper");let C=[];function re(){return C.push(b.after("render",te.prototype,function(n,a){const i=P.findInReactTree(a.props.children,function(t){return t?.type?.name==="ChatInput"});if(!i?.props?.onChangeText)return;const r=P.findInReactTree(a.props.children,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;r&&r.unshift(React.createElement(ee,{inputProps:i.props}))})),C.push(b.after("render",ne.prototype,function(n,a){const i=P.findInReactTree(a,function(r){return r?.type?.name==="JumpToPresentButton"});i&&C.push(b.after("type",i,function(r,t){t?.props?.style&&(t.props.style[1].bottom+=32+8)}))})),function(){C.forEach(function(n){return n()}),C=[]}}const{ScrollView:ae}=y.General,{FormSwitchRow:L,FormRadioRow:ce,FormRow:v,FormInput:ie}=y.Forms;function oe(){return o.position??="pill",o.commas??=!0,o.minChars??=1,o.supportSLM??=!0,F.useProxy(o),React.createElement(ae,null,React.createElement(q,{title:"Settings",icon:x.getAssetIDByName("ic_cog_24px")},React.createElement(v,{label:"Minimum Characters",subLabel:"The minimum amount of characters for Char Counter to show up",leading:React.createElement(v.Icon,{source:x.getAssetIDByName("ic_message_edit")})}),React.createElement(ie,{title:"",keyboardType:"numeric",placeholder:"1",value:o.minChars.toString(),onChange:function(n){return o.minChars=Math.max(Number.isNaN(Number(n))?1:Number(n),1)},style:{marginTop:-25,marginHorizontal:12}}),React.createElement(L,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement(v.Icon,{source:x.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return o.commas=!o.commas},value:o.commas}),React.createElement(L,{label:"Support SplitLargeMessages",leading:React.createElement(v.Icon,{source:x.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return o.supportSLM=!o.supportSLM},value:o.supportSLM})))}const o=z.storage;let O;var se={onLoad:function(){return O=re()},onUnload:function(){return O?.()},settings:oe};return E.default=se,E.vstorage=o,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
