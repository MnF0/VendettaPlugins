(function(g,B,j,I,c,t,N,R,m,P,ye,b,G,k){"use strict";const U=[/\bmr*e?ow+\b/,/\bnya+\b/];function V(e){return U.some(function(a){return a.test(e)})}const Y=c.findByStoreName("ThemeStore"),X=c.findByProps("colors","meta"),{TextStyleSheet:Q}=c.findByProps("TextStyleSheet"),{View:E,Text:x,Pressable:K}=R.General,{FormRow:W}=R.Forms;c.find(function(e){return e.render?.name==="ActionSheet"}),c.findByProps("openLazy","hideActionSheet"),c.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),c.findByName("Navigator"),c.findByProps("getRenderCloseButton"),c.findByProps("popModal","pushModal");function q(e){return X.meta.resolveSemanticColor(Y.theme,e)}function J(e){let{title:a,onPress:r,icon:n}=e;const i=t.stylesheet.createThemedStyleSheet({androidRipple:{color:m.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:t.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:m.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:m.semanticColors.HEADER_SECONDARY}}),o=r?K:E;return t.React.createElement(o,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},n&&t.React.createElement(E,{style:{marginRight:4}},t.React.createElement(W.Icon,{style:i.icon,source:n,size:"small"})),t.React.createElement(x,{style:i.mainText},a))}function Z(e){let{title:a,onTitlePress:r,icon:n,children:i,padding:o}=e;const l=t.stylesheet.createThemedStyleSheet({main:{backgroundColor:m.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return t.React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},t.React.createElement(J,{title:a,onPress:r,icon:n}),t.React.createElement(E,{style:l.main},o?t.React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}var O;(function(e){function a(n){let{children:i,onPress:o}=n;return t.React.createElement(v,{variant:"text-md/bold",onPress:o},i)}e.Bold=a;function r(n){let{children:i,onPress:o}=n;return t.React.createElement(x,{style:{textDecorationLine:"underline"},onPress:o},i)}e.Underline=r})(O||(O={}));function v(e){let{variant:a,lineClamp:r,color:n,align:i,style:o,onPress:l,getChildren:y,children:w,liveUpdate:f}=e;const[u,h]=t.React.useReducer(function(A){return~A},0);return t.React.useEffect(function(){if(!f)return;const A=new Date().setMilliseconds(1e3);let F,$;return $=setTimeout(function(){h(),F=setInterval(h,1e3)},A-Date.now()),function(){clearTimeout($),clearInterval(F)}},[]),t.React.createElement(x,{style:[a?Q[a]:{},n?{color:q(m.semanticColors[n])}:{},i?{textAlign:i}:{},o??{}],numberOfLines:r,onPress:l},y?.()??w)}const{triggerHaptic:_}=c.findByProps("triggerHaptic"),ee=async function(e){_();const a=setInterval(_,1);return new Promise(function(r){return setTimeout(function(){return r(clearInterval(a))},e)})};function te(e){let{until:a}=e;const[r,n]=t.React.useReducer(function(h){return~h},0),i=t.React.useRef(Date.now()),o=t.React.useRef(0);t.React.useEffect(function(){a>=Date.now()&&setTimeout(n,1)});const l=Math.max(a-Date.now(),0),y=Date.now()-i.current,w=a-i.current,f=y/w;let u=0;return l<=1e3?u=l%100:l<=3e3?u=l%250:l<=5e3?u=l%500:u=l%1e3,u>o.current&&t.ReactNative.Platform.select({android:t.ReactNative.Vibration.vibrate(75),ios:ee(75)}),o.current=u,t.React.createElement(v,{variant:"heading-xl/semibold",color:"TEXT_NORMAL",style:{transform:[{rotate:`${Math.floor((Math.random()-.5)*(f*30))}deg`},{scale:1+f/3+Math.max(l%1e3-500,0)/1e3}]}},Math.floor(l/1e3),".",Math.floor(l%1e3/10).toString().padStart(2,"0"),"s")}function S(){return S=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S.apply(this,arguments)}function ne(e){const[a,r]=t.React.useReducer(function(i){return~i},0);t.React.useEffect(function(){e.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(e.until-Date.now(),0);return t.React.createElement(v,S({},b.without(e,"until"),{style:{transform:[{scale:1+Math.max(n*2%1e3-500,0)/5e3}]}}))}function D(){return D=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}function re(e){const[a,r]=t.React.useReducer(function(o){return~o},0),n=t.React.useRef(Date.now()+e.duration);t.React.useEffect(function(){n.current>=Date.now()&&setTimeout(r,1)});const i=Math.max(n.current-Date.now(),0);return t.React.createElement(v,D({},b.without(e,"duration"),{style:{transform:[{scale:1+i/e.duration*.2}]}}))}function C(){return C=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(this,arguments)}function ae(e){const[a,r]=t.React.useReducer(function(i){return~i},0);t.React.useEffect(function(){e.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(e.until-Date.now(),0);return t.React.createElement(R.Button,C({},b.without(e,"until"),{style:[...e.style,{transform:[{scale:1+Math.max(n*2%1e3-500,0)/8e3}]}]}))}const{crash:ie}=c.findByProps("crash"),{logout:se}=c.findByProps("logout");function oe(){s.punishment==="mute"?d.muted=Date.now()+12e3:s.punishment==="crash"?ie():s.punishment==="logout"&&se()}const{View:L}=R.General,{close:le}=c.findByProps("openLazy","close");function ce(e){let{whoMew:a}=e;const r=t.ReactNative.Dimensions.get("screen"),n=[[r.width*.1,r.width*.9],[r.height*.1,r.height*.9]],i=(s.explodeTime??5)*1e3,[o,l]=t.React.useState(!1),[y,w]=t.React.useState(!1),f=t.React.useRef(Date.now()+i),u=t.React.useRef([Math.random()*(n[0][1]-n[0][0])+n[0][0],Math.random()*(n[1][1]-n[1][0])+n[1][0]]);d.active=!0;const h=function(){d.active=!1,d.cooldown=Date.now()+1e4,le()};return t.React.useEffect(function(){setTimeout(function(){return l(!0)},i),o&&setTimeout(y?h:function(){h(),oe()},1e3)},[o]),t.React.createElement(L,{duration:500,fade:"in",style:{backgroundColor:"#0005",width:r.width,height:r.height},animateOnInit:!0},t.React.createElement(L,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},o?t.React.createElement(re,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",duration:350},y?"Good job!":"Better luck next time!"):t.React.createElement(t.React.Fragment,null,t.React.createElement(ne,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",style:{marginBottom:12},until:f.current,align:"center"},"Quick, ",a," meowed!"),t.React.createElement(te,{until:f.current}))),!o&&t.React.createElement(ae,{text:"Tap Me!",color:"green",size:"small",onPress:function(){w(!0),l(!0)},style:[{position:"absolute",zIndex:2,left:u.current[0],top:u.current[1],width:90}],until:f.current}))}const ue=c.findByStoreName("SelectedChannelStore"),de=c.findByStoreName("UserStore"),{ChatInput:fe}=c.findByProps("ChatInput"),H=function(e){const a=de.getCurrentUser(),r=e.channelId===ue.getChannelId()||e.message.mentions.find(function(n){return n.id===a.id});if(!(e.message.state==="SENDING"||e.message.author.id===a.id||t.ReactNative.AppState.currentState!=="active"||!r)&&V(e.message.content)&&!d.active&&Date.now()>d.cooldown)return N.showCustomAlert(ce,{whoMew:e.message.author.username})};function z(){const e=new Array;return t.FluxDispatcher.subscribe("MESSAGE_CREATE",H),e.push(function(){return t.FluxDispatcher.unsubscribe("MESSAGE_CREATE",H)}),e.push(k.after("renderInput",fe.prototype,function(a,r){const n=b.findInReactTree(r,function(i){return i?.type?.name==="ChatInput"});n&&d.muted>=Date.now()&&(n.props.editable=!1,n.props.text="",n.props.placeholder=t.i18n.Messages.READ_ONLY_CHANNEL)})),function(){return e.forEach(function(a){return a()})}}const{ScrollView:he}=R.General,{FormRow:T,FormRadioRow:p}=R.Forms;function ge(){return s.explodeTime??=5,s.punishment??="crash",G.useProxy(s),React.createElement(he,null,React.createElement(Z,{title:"Settings",icon:P.getAssetIDByName("ic_cog_24px")},React.createElement(T,{label:"Reaction time",subLabel:"How much time you have to tap the button",leading:React.createElement(T.Icon,{source:P.getAssetIDByName("ic_message_edit")})}),React.createElement(p,{label:"3 seconds",subLabel:"Hard",onPress:function(){return s.explodeTime=3},selected:s.explodeTime===3,style:{marginHorizontal:12}}),React.createElement(p,{label:"5 seconds",subLabel:"Medium",onPress:function(){return s.explodeTime=5},selected:s.explodeTime===5,style:{marginHorizontal:12}}),React.createElement(p,{label:"10 seconds",subLabel:"Easy",onPress:function(){return s.explodeTime=10},selected:s.explodeTime===10,style:{marginHorizontal:12}}),React.createElement(T,{label:"Punishment",leading:React.createElement(T.Icon,{source:P.getAssetIDByName("ic_message_edit")})}),React.createElement(p,{label:"Crash Discord",subLabel:"Quick and painless!",onPress:function(){return s.punishment="crash"},selected:s.punishment==="crash",style:{marginHorizontal:12}}),React.createElement(p,{label:"Mute for 10s",onPress:function(){return s.punishment="mute"},selected:s.punishment==="mute",style:{marginHorizontal:12}}),React.createElement(p,{label:"Log out",subLabel:"Not recommended lol",onPress:function(){return s.punishment="logout"},selected:s.punishment==="logout",style:{marginHorizontal:12}})))}const s=j.storage,Re=5e3,d={active:!1,cooldown:0,muted:0};let M;var pe={onLoad:function(){s.installProgress===void 0?(s.installProgress=!1,setImmediate(function(){I.stopPlugin(B.plugin.id,!0)})):s.installProgress===!1?N.showConfirmationAlert({title:"Warning",content:"This plugin can mute you in all channels, crash your discord and log you out. By pressing Okay you acknowledge this (disabling this plugin will stop this behaviour)",confirmText:"Okay",confirmColor:"brand",onConfirm:function(){s.installProgress=!0,M=z()},cancelText:"Cancel",onCancel:function(){return I.removePlugin(B.plugin.id)}}):s.installProgress&&(M=z())},onUnload:function(){return M?.()},settings:ge};return g.default=pe,g.explodeTime=Re,g.isMeow=d,g.vstorage=s,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta,vendetta.plugin,vendetta.plugins,vendetta.metro,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.components,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils,vendetta.storage,vendetta.patcher);
