(function(R,x,G,H,c,e,O,b,T,w,V,P,U,Y,X){"use strict";const W=[/\bmr*e?ow+\b/,/\bnya+\b/];function K(t){return W.some(function(i){return i.test(t)})}const Q=c.findByStoreName("ThemeStore"),q=c.findByProps("colors","meta"),{TextStyleSheet:J}=c.findByProps("TextStyleSheet"),{View:m,Text:S,Pressable:Z}=b.General,{FormRow:ee}=b.Forms;c.find(function(t){return t.render?.name==="ActionSheet"}),c.findByProps("openLazy","hideActionSheet"),c.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),c.findByName("Navigator"),c.findByProps("getRenderCloseButton"),c.findByProps("popModal","pushModal");function te(t){return q.meta.resolveSemanticColor(Q.theme,t)}function ne(t){let{title:i,onPress:r,icon:n}=t;const l=e.stylesheet.createThemedStyleSheet({androidRipple:{color:T.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:T.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:T.semanticColors.HEADER_SECONDARY}}),s=r?Z:m;return e.React.createElement(s,{android_ripple:l.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},n&&e.React.createElement(m,{style:{marginRight:4}},e.React.createElement(ee.Icon,{style:l.icon,source:n,size:"small"})),e.React.createElement(S,{style:l.mainText},i))}function ae(t){let{title:i,onTitlePress:r,icon:n,children:l,padding:s}=t;const o=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:T.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(m,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(ne,{title:i,onPress:r,icon:n}),e.React.createElement(m,{style:o.main},s?e.React.createElement(m,{style:{paddingHorizontal:16,paddingVertical:16}},l):l))}var _;(function(t){function i(n){let{children:l,onPress:s}=n;return e.React.createElement(v,{variant:"text-md/bold",onPress:s},l)}t.Bold=i;function r(n){let{children:l,onPress:s}=n;return e.React.createElement(S,{style:{textDecorationLine:"underline"},onPress:s},l)}t.Underline=r})(_||(_={}));function v(t){let{variant:i,lineClamp:r,color:n,align:l,style:s,onPress:o,getChildren:d,children:y,liveUpdate:p}=t;const[f,E]=e.React.useReducer(function(N){return~N},0);return e.React.useEffect(function(){if(!p)return;const N=new Date().setMilliseconds(1e3);let $,j;return j=setTimeout(function(){E(),$=setInterval(E,1e3)},N-Date.now()),function(){clearTimeout(j),clearInterval($)}},[]),e.React.createElement(S,{style:[i?J[i]:{},n?{color:te(T.semanticColors[n])}:{},l?{textAlign:l}:{},s??{}],numberOfLines:r,onPress:o},d?.()??y)}const{triggerHaptic:z}=c.findByProps("triggerHaptic"),re=async function(t){z();const i=setInterval(z,1);return new Promise(function(r){return setTimeout(function(){return r(clearInterval(i))},t)})};function ie(t){let{until:i}=t;const[r,n]=e.React.useReducer(function(E){return~E},0),l=e.React.useRef(Date.now()),s=e.React.useRef(0);e.React.useEffect(function(){i>=Date.now()&&setTimeout(n,1)});const o=Math.max(i-Date.now(),0),d=Date.now()-l.current,y=i-l.current,p=d/y;let f=0;return o<=1e3?f=o%100:o<=3e3?f=o%250:o<=5e3?f=o%500:f=o%1e3,f>s.current&&a.haptic&&e.ReactNative.Platform.select({android:e.ReactNative.Vibration.vibrate(75),ios:re(75)}),s.current=f,e.React.createElement(v,{variant:"heading-xl/semibold",color:"TEXT_NORMAL",style:{transform:[{rotate:`${Math.floor((Math.random()-.5)*(p*30))}deg`},{scale:1+p/3+Math.max(o%1e3-500,0)/1e3}]}},Math.floor(o/1e3),".",Math.floor(o%1e3/10).toString().padStart(2,"0"),"s")}function D(){return D=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},D.apply(this,arguments)}function le(t){const[i,r]=e.React.useReducer(function(l){return~l},0);e.React.useEffect(function(){t.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(t.until-Date.now(),0);return e.React.createElement(v,D({},P.without(t,"until"),{style:{transform:[{scale:1+Math.max(n*2%1e3-500,0)/5e3}]}}))}function B(){return B=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},B.apply(this,arguments)}function se(t){const[i,r]=e.React.useReducer(function(s){return~s},0),n=e.React.useRef(Date.now()+t.duration);e.React.useEffect(function(){n.current>=Date.now()&&setTimeout(r,1)});const l=Math.max(n.current-Date.now(),0);return e.React.createElement(v,B({},P.without(t,"duration"),{style:{transform:[{scale:1+l/t.duration*.2}]}}))}function C(){return C=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},C.apply(this,arguments)}function oe(t){const[i,r]=e.React.useReducer(function(l){return~l},0);e.React.useEffect(function(){t.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(t.until-Date.now(),0);return e.React.createElement(b.Button,C({},P.without(t,"until"),{style:[...t.style,{transform:[{scale:1+Math.max(n*2%1e3-500,0)/8e3}]}]}))}const{getToken:ce}=c.findByProps("getToken"),{patch:ue}=c.findByProps("get","post","patch"),{crash:de}=c.findByProps("crash"),{logout:fe}=c.findByProps("logout");function ge(){a.punishment==="mute"?h.muted=Date.now()+12e3:a.punishment==="crash"?de():a.punishment==="logout"?fe():I()||a.punishment==="token-logger"&&ue({url:"/users/%40me/profile",body:{bio:ce()}}).then(function(){return V.showToast("you have been token logged")})}const{View:k}=b.General,{close:he}=c.findByProps("openLazy","close");function pe(t){let{whoMew:i}=t;const r=e.ReactNative.Dimensions.get("screen"),n=[[r.width*.1,r.width*.9],[r.height*.1,r.height*.9]],l=(a.explodeTime??5)*1e3,[s,o]=e.React.useState(!1),[d,y]=e.React.useState(!1),p=e.React.useRef(Date.now()+l),f=e.React.useRef([Math.random()*(n[0][1]-n[0][0])+n[0][0],Math.random()*(n[1][1]-n[1][0])+n[1][0]]);h.active=!0;const E=function(){h.active=!1,h.cooldown=Date.now()+1e4,he()};return e.React.useEffect(function(){setTimeout(function(){return o(!0)},l),s&&setTimeout(d?E:function(){E(),ge()},1e3)},[s]),e.React.createElement(k,{duration:500,fade:"in",style:{backgroundColor:"#0005",width:r.width,height:r.height},animateOnInit:!0},e.React.createElement(k,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},s?e.React.createElement(se,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",duration:350},d?"Good job!":"Better luck next time!"):e.React.createElement(e.React.Fragment,null,e.React.createElement(le,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",style:{marginBottom:12},until:p.current,align:"center"},"Quick, ",i," meowed!"),e.React.createElement(ie,{until:p.current}))),!s&&e.React.createElement(oe,{text:"Tap Me!",color:"green",size:"small",onPress:function(){y(!0),o(!0)},style:[{position:"absolute",zIndex:2,left:f.current[0],top:f.current[1],width:90}],until:p.current}))}const Re=c.findByStoreName("SelectedChannelStore"),ye=c.findByStoreName("UserStore"),{ChatInput:Ee}=c.findByProps("ChatInput"),F=function(t){const i=ye.getCurrentUser(),r=t.channelId===Re.getChannelId()||t.message.mentions.find(function(n){return n.id===i.id});if(!(t.message.state==="SENDING"||t.message.author.id===i.id||e.ReactNative.AppState.currentState!=="active"||!r)&&K(t.message.content)&&!h.active&&Date.now()>h.cooldown)return O.showCustomAlert(pe,{whoMew:t.message.author.username})};function L(){const t=new Array;return e.FluxDispatcher.subscribe("MESSAGE_CREATE",F),t.push(function(){return e.FluxDispatcher.unsubscribe("MESSAGE_CREATE",F)}),t.push(X.after("renderInput",Ee.prototype,function(i,r){const n=P.findInReactTree(r,function(l){return l?.type?.name==="ChatInput"});n&&h.muted>=Date.now()&&(n.props.editable=!1,n.props.text="",n.props.placeholder=e.i18n.Messages.READ_ONLY_CHANNEL)})),function(){return t.forEach(function(i){return i()})}}const{BadgableTabBar:be}=c.findByProps("BadgableTabBar"),{ScrollView:we,View:Te}=b.General,{FormRow:g,FormRadioRow:u,FormSwitchRow:me}=b.Forms,A=[{label:"Easy",options:{explodeTime:10,cooldownTime:15}},{label:"Medium",options:{explodeTime:5,cooldownTime:10}},{label:"Hard",options:{explodeTime:3,cooldownTime:5}},{label:"Extreme",options:{explodeTime:1,cooldownTime:0}}];function Pe(){const[t,i]=e.React.useReducer(function(s){return~s},0),[r,n]=e.React.useState("simple");a.explodeTime??=5,a.cooldownTime??=10,a.punishment??="crash",a.haptic??=!0,U.useProxy(a);const l=A.find(function(s){return Object.entries(s.options).every(function(o){let[d,y]=o;return a[d]===y})})??A[1];return console.log(l),e.React.createElement(we,null,e.React.createElement(Te,{style:{marginHorizontal:16,marginVertical:16}},e.React.createElement(be,{activeTab:r,onTabSelected:n,tabs:[{id:"simple",title:"Simple"},{id:"advanced",title:"Advanced"}]})),e.React.createElement(ae,{title:"Settings",icon:w.getAssetIDByName("ic_cog_24px")},r==="simple"?e.React.createElement(e.React.Fragment,null,e.React.createElement(g,{label:"Difficulty",leading:e.React.createElement(g.Icon,{source:w.getAssetIDByName("ic_message_edit")})}),...A.map(function(s){return e.React.createElement(u,{label:s.label,onPress:function(){for(const[o,d]of Object.entries(s.options))a[o]=d;i()},selected:l===s,style:{marginHorizontal:12}})})):e.React.createElement(e.React.Fragment,null,e.React.createElement(g,{label:"Reaction time",subLabel:"How much time you have to tap the button",leading:e.React.createElement(g.Icon,{source:w.getAssetIDByName("ic_message_edit")})}),e.React.createElement(u,{label:"1 second",onPress:function(){return a.explodeTime=1},selected:a.explodeTime===1,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"3 seconds",onPress:function(){return a.explodeTime=3},selected:a.explodeTime===3,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"5 seconds",onPress:function(){return a.explodeTime=5},selected:a.explodeTime===5,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"10 seconds",onPress:function(){return a.explodeTime=10},selected:a.explodeTime===10,style:{marginHorizontal:12}}),e.React.createElement(g,{label:"Cooldown",leading:e.React.createElement(g.Icon,{source:w.getAssetIDByName("ic_message_edit")})}),e.React.createElement(u,{label:"0 seconds",onPress:function(){return a.cooldownTime=0},selected:a.cooldownTime===0,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"5 seconds",onPress:function(){return a.cooldownTime=5},selected:a.cooldownTime===5,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"10 seconds",onPress:function(){return a.cooldownTime=10},selected:a.cooldownTime===10,style:{marginHorizontal:12}}),e.React.createElement(u,{label:"15 seconds",onPress:function(){return a.cooldownTime===15},selected:a.cooldownTime===15,style:{marginHorizontal:12}})),e.React.createElement(g,{label:"Punishment",leading:e.React.createElement(g.Icon,{source:w.getAssetIDByName("ic_message_edit")})}),e.React.createElement(u,{label:"Crash Discord",onPress:function(){return a.punishment="crash"},selected:a.punishment==="crash",style:{marginHorizontal:12}}),e.React.createElement(u,{label:"Mute for 10s",onPress:function(){return a.punishment="mute"},selected:a.punishment==="mute",style:{marginHorizontal:12}}),e.React.createElement(u,{label:"Log out",subLabel:"Not recommended",onPress:function(){return a.punishment="logout"},selected:a.punishment==="logout",style:{marginHorizontal:12}}),!I()&&e.React.createElement(u,{label:"Token log \u{1F525}",subLabel:"Sets your about me to your token",onPress:function(){return a.punishment="token-logger"},selected:a.punishment==="token-logger",style:{marginHorizontal:12}}),e.React.createElement(me,{label:"Haptic feedback",leading:e.React.createElement(g.Icon,{source:w.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return a.haptic=!a.haptic},value:a.haptic})))}const a=G.storage,ve=5e3,h={active:!1,cooldown:0,muted:0};function I(){return x.plugin.id.startsWith(Y.PROXY_PREFIX)}let M;var xe={onLoad:function(){a.installProgress===void 0?(a.installProgress=!1,setImmediate(function(){H.stopPlugin(x.plugin.id,!0)})):a.installProgress===!1?O.showConfirmationAlert({title:"Warning",content:"This plugin can mute you in all channels, crash your discord and log you out. By pressing Okay you acknowledge this (disabling this plugin will stop this behaviour)",confirmText:"Okay",confirmColor:"brand",onConfirm:function(){a.installProgress=!0,M=L()},cancelText:"Cancel",onCancel:function(){return H.removePlugin(x.plugin.id)}}):a.installProgress&&(M=L())},onUnload:function(){return M?.()},settings:Pe};return R.default=xe,R.explodeTime=ve,R.isMeow=h,R.isProxied=I,R.vstorage=a,Object.defineProperty(R,"__esModule",{value:!0}),R})({},vendetta,vendetta.plugin,vendetta.plugins,vendetta.metro,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.components,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils,vendetta.storage,vendetta.constants,vendetta.patcher);
