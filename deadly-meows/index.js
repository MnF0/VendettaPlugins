(function(f,C,O,M,l,e,A,h,y,x,fe,w,z,F){"use strict";const G=[/\bmr*e?ow+\b/,/\bnya+\b/];function k(t){return G.some(function(o){return o.test(t)})}const $=l.findByStoreName("ThemeStore"),U=l.findByProps("colors","meta"),{TextStyleSheet:Y}=l.findByProps("TextStyleSheet"),{View:E,Text:v,Pressable:j}=h.General,{FormRow:V}=h.Forms;l.find(function(t){return t.render?.name==="ActionSheet"}),l.findByProps("openLazy","hideActionSheet"),l.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton","ActionSheetContentContainer"),l.findByName("Navigator"),l.findByProps("getRenderCloseButton"),l.findByProps("popModal","pushModal");function X(t){return U.meta.resolveSemanticColor($.theme,t)}function Q(t){let{title:o,onPress:r,icon:n}=t;const a=e.stylesheet.createThemedStyleSheet({androidRipple:{color:y.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:y.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:y.semanticColors.HEADER_SECONDARY}}),s=r?j:E;return e.React.createElement(s,{android_ripple:a.androidRipple,disabled:!1,accessibilityRole:"button",onPress:r,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},n&&e.React.createElement(E,{style:{marginRight:4}},e.React.createElement(V.Icon,{style:a.icon,source:n,size:"small"})),e.React.createElement(v,{style:a.mainText},o))}function K(t){let{title:o,onTitlePress:r,icon:n,children:a,padding:s}=t;const u=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:y.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(Q,{title:o,onPress:r,icon:n}),e.React.createElement(E,{style:u.main},s?e.React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},a):a))}var B;(function(t){function o(n){let{children:a,onPress:s}=n;return e.React.createElement(b,{variant:"text-md/bold",onPress:s},a)}t.Bold=o;function r(n){let{children:a,onPress:s}=n;return e.React.createElement(v,{style:{textDecorationLine:"underline"},onPress:s},a)}t.Underline=r})(B||(B={}));function b(t){let{variant:o,lineClamp:r,color:n,align:a,style:s,onPress:u,getChildren:g,children:p,liveUpdate:d}=t;const[S,m]=e.React.useReducer(function(D){return~D},0);return e.React.useEffect(function(){if(!d)return;const D=new Date().setMilliseconds(1e3);let L,H;return H=setTimeout(function(){m(),L=setInterval(m,1e3)},D-Date.now()),function(){clearTimeout(H),clearInterval(L)}},[]),e.React.createElement(v,{style:[o?Y[o]:{},n?{color:X(y.semanticColors[n])}:{},a?{textAlign:a}:{},s??{}],numberOfLines:r,onPress:u},g?.()??p)}function W(t){let{until:o}=t;const[r,n]=e.React.useReducer(function(d){return~d},0),a=e.React.useRef(Date.now());e.React.useEffect(function(){o>=Date.now()&&setTimeout(n,1)});const s=Math.max(o-Date.now(),0),u=Date.now()-a.current,g=o-a.current,p=u/g;return e.React.createElement(b,{variant:"heading-xl/semibold",color:"TEXT_NORMAL",style:{transform:[{rotate:`${Math.floor((Math.random()-.5)*(p*30))}deg`},{scale:1+p/3+Math.max(s%1e3-500,0)/1e3}]}},Math.floor(s/1e3),".",Math.floor(s%1e3/10).toString().padStart(2,"0"),"s")}function q(t){const[o,r]=e.React.useReducer(function(a){return~a},0);e.React.useEffect(function(){t.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(t.until-Date.now(),0);return e.React.createElement(b,{...w.without(t,"until"),style:{transform:[{scale:1+Math.max(n*2%1e3-500,0)/5e3}]}})}function J(t){const[o,r]=e.React.useReducer(function(s){return~s},0),n=e.React.useRef(Date.now()+t.duration);e.React.useEffect(function(){n.current>=Date.now()&&setTimeout(r,1)});const a=Math.max(n.current-Date.now(),0);return e.React.createElement(b,{...w.without(t,"duration"),style:{transform:[{scale:1+a/t.duration*.2}]}})}function Z(t){const[o,r]=e.React.useReducer(function(a){return~a},0);e.React.useEffect(function(){t.until>=Date.now()&&setTimeout(r,1)});const n=Math.max(t.until-Date.now(),0);return e.React.createElement(h.Button,{...w.without(t,"until"),style:[...t.style,{transform:[{scale:1+Math.max(n*2%1e3-500,0)/8e3}]}]})}const{crash:ee}=l.findByProps("crash"),{logout:te}=l.findByProps("logout");function ne(){i.punishment==="mute"?c.muted=Date.now()+12e3:i.punishment==="crash"?ee():i.punishment==="logout"&&te()}const{View:I}=h.General,{close:ae}=l.findByProps("openLazy","close");function re(t){let{whoMew:o}=t;const r=e.ReactNative.Dimensions.get("screen"),n=[[r.width*.1,r.width*.9],[r.height*.1,r.height*.9]],a=(i.explodeTime??5)*1e3,[s,u]=e.React.useState(!1),[g,p]=e.React.useState(!1),d=e.React.useRef(Date.now()+a),S=e.React.useRef([Math.random()*(n[0][1]-n[0][0])+n[0][0],Math.random()*(n[1][1]-n[1][0])+n[1][0]]);c.active=!0;const m=function(){c.active=!1,c.cooldown=Date.now()+1e4,ae()};return e.React.useEffect(function(){setTimeout(function(){return u(!0)},a),s&&setTimeout(g?m:function(){m(),ne()},1e3)},[s]),e.React.createElement(I,{duration:500,fade:"in",style:{backgroundColor:"#0005",width:r.width,height:r.height},animateOnInit:!0},e.React.createElement(I,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}},s?e.React.createElement(J,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",duration:350},g?"Good job!":"Better luck next time!"):e.React.createElement(e.React.Fragment,null,e.React.createElement(q,{variant:"heading-xxl/bold",color:"TEXT_NORMAL",style:{marginBottom:12},until:d.current,align:"center"},"Quick, ",o," meowed!"),e.React.createElement(W,{until:d.current}))),!s&&e.React.createElement(Z,{text:"Tap Me!",color:"green",size:"small",onPress:function(){p(!0),u(!0)},style:[{position:"absolute",zIndex:2,left:S.current[0],top:S.current[1],width:90}],until:d.current}))}const ie=l.findByStoreName("SelectedChannelStore"),oe=l.findByStoreName("UserStore"),{ChatInput:se}=l.findByProps("ChatInput"),N=function(t){const o=oe.getCurrentUser(),r=t.channelId===ie.getChannelId()||t.message.mentions.find(function(n){return n.id===o.id});if(!(t.message.state==="SENDING"||t.message.author.id===o.id||e.ReactNative.AppState.currentState!=="active"||!r)&&k(t.message.content)&&!c.active&&Date.now()>c.cooldown)return A.showCustomAlert(re,{whoMew:t.message.author.username})};function _(){const t=new Array;return e.FluxDispatcher.subscribe("MESSAGE_CREATE",N),t.push(function(){return e.FluxDispatcher.unsubscribe("MESSAGE_CREATE",N)}),t.push(F.after("renderInput",se.prototype,function(o,r){const n=w.findInReactTree(r,function(a){return a?.type?.name==="ChatInput"});n&&c.muted>=Date.now()&&(n.props.editable=!1,n.props.text="",n.props.placeholder=e.i18n.Messages.READ_ONLY_CHANNEL)})),function(){return t.forEach(function(o){return o()})}}const{ScrollView:le}=h.General,{FormRow:T,FormRadioRow:R}=h.Forms;function ce(){return i.explodeTime??=5,i.punishment??="crash",z.useProxy(i),React.createElement(le,null,React.createElement(K,{title:"Settings",icon:x.getAssetIDByName("ic_cog_24px")},React.createElement(T,{label:"Reaction time",subLabel:"How much time you have to tap the button",leading:React.createElement(T.Icon,{source:x.getAssetIDByName("ic_message_edit")})}),React.createElement(R,{label:"3 seconds",subLabel:"Hard",onPress:function(){return i.explodeTime=3},selected:i.explodeTime===3,style:{marginHorizontal:12}}),React.createElement(R,{label:"5 seconds",subLabel:"Medium",onPress:function(){return i.explodeTime=5},selected:i.explodeTime===5,style:{marginHorizontal:12}}),React.createElement(R,{label:"10 seconds",subLabel:"Easy",onPress:function(){return i.explodeTime=10},selected:i.explodeTime===10,style:{marginHorizontal:12}}),React.createElement(T,{label:"Punishment",leading:React.createElement(T.Icon,{source:x.getAssetIDByName("ic_message_edit")})}),React.createElement(R,{label:"Crash Discord",subLabel:"Quick and painless!",onPress:function(){return i.punishment="crash"},selected:i.punishment==="crash",style:{marginHorizontal:12}}),React.createElement(R,{label:"Mute for 10s",onPress:function(){return i.punishment="mute"},selected:i.punishment==="mute",style:{marginHorizontal:12}}),React.createElement(R,{label:"Log out",subLabel:"Not recommended lol",onPress:function(){return i.punishment="logout"},selected:i.punishment==="logout",style:{marginHorizontal:12}})))}const i=O.storage,ue=5e3,c={active:!1,cooldown:0,muted:0};let P;var de={onLoad:function(){i.installProgress===void 0?(i.installProgress=!1,setImmediate(function(){M.stopPlugin(C.plugin.id,!0)})):i.installProgress===!1?A.showConfirmationAlert({title:"Warning",content:"This plugin can mute you in all channels, crash your discord and log you out. By pressing Okay you acknowledge this (disabling this plugin will stop this behaviour of course)",confirmText:"Okay",confirmColor:"brand",onConfirm:function(){i.installProgress=!0,P=_()},cancelText:"Cancel",onCancel:function(){return M.removePlugin(C.plugin.id)}}):i.installProgress&&(P=_())},onUnload:function(){return P?.()},settings:ce};return f.default=de,f.explodeTime=ue,f.isMeow=c,f.vstorage=i,Object.defineProperty(f,"__esModule",{value:!0}),f})({},vendetta,vendetta.plugin,vendetta.plugins,vendetta.metro,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.components,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.utils,vendetta.storage,vendetta.patcher);
